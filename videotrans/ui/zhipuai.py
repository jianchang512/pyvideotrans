# run again.  Do not edit this file unless you know what you are doing.


from PySide6 import QtCore, QtWidgets
from PySide6.QtCore import Qt

from videotrans.configure.config import tr,params,settings,app_cfg,logger
from videotrans.util import tools


class Ui_zhipuaiform(object):
    def setupUi(self, zhipuaiform):
        self.has_done = False
        zhipuaiform.setObjectName("zhipuaiform")
        zhipuaiform.setWindowModality(QtCore.Qt.NonModal)
        zhipuaiform.resize(600, 600)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(zhipuaiform.sizePolicy().hasHeightForWidth())
        zhipuaiform.setSizePolicy(sizePolicy)
        zhipuaiform.setMaximumSize(QtCore.QSize(600, 600))

        v1 = QtWidgets.QVBoxLayout(zhipuaiform)
        h2 = QtWidgets.QHBoxLayout()

        h4 = QtWidgets.QHBoxLayout()

        self.label_0 = QtWidgets.QPushButton()
        self.label_0.setGeometry(QtCore.QRect(10, 10, 580, 35))
        self.label_0.setStyleSheet("background-color: rgba(255, 255, 255,0);text-align:left")
        self.label_0.setText(tr('Zhipu AI'))
        v1.addWidget(self.label_0)

        self.label_2 = QtWidgets.QLabel(zhipuaiform)
        self.label_2.setMinimumSize(QtCore.QSize(0, 35))
        self.label_2.setSizeIncrement(QtCore.QSize(0, 35))
        self.label_2.setObjectName("label_2")
        self.zhipu_key = QtWidgets.QLineEdit(zhipuaiform)
        self.zhipu_key.setMinimumSize(QtCore.QSize(0, 35))
        self.zhipu_key.setObjectName("zhipu_key")
        h2.addWidget(self.label_2)
        h2.addWidget(self.zhipu_key)
        v1.addLayout(h2)


        h_token = QtWidgets.QHBoxLayout()

        label_token = QtWidgets.QLabel()
        label_token.setObjectName("label_token")
        label_token.setText(tr("Maximum output token"))
        self.max_token = QtWidgets.QLineEdit()
        self.max_token.setMinimumSize(QtCore.QSize(0, 35))
        self.max_token.setObjectName("max_token")

        h_token.addWidget(label_token)
        h_token.addWidget(self.max_token)
        v1.addLayout(h_token)

        h_model = QtWidgets.QHBoxLayout()
        self.label_selectmodel = QtWidgets.QLabel()
        self.label_selectmodel.setObjectName("label_selectmodel")
        self.label_selectmodel.setText(tr("Model"))
        self.zhipu_model = QtWidgets.QComboBox()
        self.zhipu_model.setMinimumSize(QtCore.QSize(0, 35))
        self.zhipu_model.setObjectName("zhipu_model")
        h_model.addWidget(self.label_selectmodel)
        h_model.addWidget(self.zhipu_model)
        v1.addLayout(h_model)

        self.label_allmodels = QtWidgets.QLabel()
        self.label_allmodels.setObjectName("label_allmodels")
        self.label_allmodels.setText(
            tr("Fill in all available models, separated by commas. After filling in, you can select them above"))
        v1.addWidget(self.label_allmodels)

        self.edit_allmodels = QtWidgets.QPlainTextEdit()
        self.edit_allmodels.setObjectName("edit_allmodels")
        v1.addWidget(self.edit_allmodels)

        self.label_4 = QtWidgets.QLabel(zhipuaiform)
        self.label_4.setObjectName("label_4")

        self.template = QtWidgets.QPlainTextEdit(zhipuaiform)
        self.template.setObjectName("template")
        self.template.setReadOnly(True)
        v1.addWidget(self.label_4)
        v1.addWidget(self.template)

        self.set = QtWidgets.QPushButton(zhipuaiform)
        self.set.setMinimumSize(QtCore.QSize(0, 35))
        self.set.setObjectName("set")

        self.test = QtWidgets.QPushButton()
        self.test.setMinimumSize(QtCore.QSize(0, 30))
        self.test.setObjectName("test")
        self.test.setText(tr("Test"))

        help_btn = QtWidgets.QPushButton()
        help_btn.setMinimumSize(QtCore.QSize(0, 35))
        help_btn.setStyleSheet("background-color: rgba(255, 255, 255,0)")
        help_btn.setObjectName("help_btn")
        help_btn.setCursor(Qt.PointingHandCursor)
        help_btn.setText(tr("Fill out the tutorial"))
        help_btn.clicked.connect(lambda: tools.open_url(url='https://pyvideotrans.com/zhipuai-ai'))

        h4.addWidget(self.set)
        h4.addWidget(self.test)
        h4.addWidget(help_btn)
        v1.addLayout(h4)
        self.template.setPlainText(tr("Prompt: Please open the {} file directly to modify it", 'zhipuai', 'zhipuai'))

        self.retranslateUi(zhipuaiform)
        QtCore.QMetaObject.connectSlotsByName(zhipuaiform)

    def update_ui(self):
        allmodels_str = settings.get('zhipuai_model','')
        allmodels = str(settings.get('zhipuai_model','')).split(',')
        self.zhipu_model.clear()
        self.zhipu_model.addItems(allmodels)
        self.edit_allmodels.setPlainText(allmodels_str)
        self.zhipu_key.setText(params.get("zhipu_key",''))
        self.zhipu_model.setCurrentText(params.get("zhipu_model",''))
        self.max_token.setText(params.get("zhipu_max_token",''))
    def retranslateUi(self, zhipuaiform):
        zhipuaiform.setWindowTitle(tr("Zhipu AI"))
        self.label_2.setText(tr("SK"))
        self.label_4.setText(tr("{lang} represents the target language name, do not delete it."))
        self.set.setText(tr('Save'))
