[English Readme](./README_EN.md)  /  [ğŸ‘‘æåŠ©è¯¥é¡¹ç›®](./about.md) / Qç¾¤ 608815898

# è§†é¢‘ç¿»è¯‘å’Œé…éŸ³å·¥å…·

>
> è¿™æ˜¯ä¸€ä¸ªè§†é¢‘ç¿»è¯‘é…éŸ³å·¥å…·ï¼Œå¯å°†ä¸€ç§è¯­è¨€çš„è§†é¢‘ç¿»è¯‘ä¸ºæŒ‡å®šè¯­è¨€çš„è§†é¢‘ï¼Œè‡ªåŠ¨ç”Ÿæˆå’Œæ·»åŠ è¯¥è¯­è¨€çš„å­—å¹•å’Œé…éŸ³ã€‚
>
> è¯­éŸ³è¯†åˆ«åŸºäº `faster-whisper` ç¦»çº¿æ¨¡å‹.
>
> æ–‡å­—ç¿»è¯‘æ”¯æŒ `microsoft|google|baidu|tencent|chatGPT|Azure|Gemini|DeepL|DeepLX|ç¦»çº¿ç¿»è¯‘OTT` ï¼Œ
>
> æ–‡å­—åˆæˆè¯­éŸ³æ”¯æŒ `Microsoft Edge tts` `Openai TTS-1` `Elevenlabs TTS`,é…åˆ[clone-voice](https://github.com/jianchang512/clone-voice) å¯å®ç°åŸéŸ³è‰²å…‹éš†é…éŸ³
>
> å…è®¸ä¿ç•™èƒŒæ™¯ä¼´å¥éŸ³ä¹ç­‰(åŸºäºuvr5)



<a href="https://www.producthunt.com/products/translation-of-the-video?utm_source=badge-follow&utm_medium=badge&utm_souce=badge-translation&#0045;of&#0045;the&#0045;video" target="_blank"><img src="https://api.producthunt.com/widgets/embed-image/v1/follow.svg?product_id=557901&theme=light" alt="VideoTrans - video&#0032;translator&#0032;and&#0032;dubbing | Product Hunt" style="width: 250px; height: 54px;" width="250" height="54" /></a>

# ä¸»è¦ç”¨é€”å’Œä½¿ç”¨æ–¹å¼

ã€ç¿»è¯‘è§†é¢‘å¹¶é…éŸ³ã€‘æ ¹æ®éœ€è¦è®¾ç½®å„ä¸ªé€‰é¡¹ï¼Œè‡ªç”±é…ç½®ç»„åˆï¼Œå®ç°ç¿»è¯‘å’Œé…éŸ³ã€è‡ªåŠ¨åŠ å‡é€Ÿã€åˆå¹¶ç­‰

ã€è¯†åˆ«å­—å¹•ä¸ç¿»è¯‘ã€‘é€‰æ‹©è§†é¢‘æ–‡ä»¶ï¼Œé€‰æ‹©è§†é¢‘æºè¯­è¨€ï¼Œåˆ™ä»è§†é¢‘ã€è¯­éŸ³ä¸­è¯†åˆ«å‡ºæ–‡å­—ã€‘å¹¶è‡ªåŠ¨å¯¼å‡ºå­—å¹•æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€æå–å­—å¹•å¹¶ç¿»è¯‘ã€‘é€‰æ‹©è§†é¢‘æ–‡ä»¶ï¼Œé€‰æ‹©è§†é¢‘æºè¯­è¨€ï¼Œè®¾ç½®æƒ³ç¿»è¯‘åˆ°çš„ç›®æ ‡è¯­è¨€ï¼Œåˆ™ä»ã€è§†é¢‘è¯­éŸ³ä¸­è¯†åˆ«å‡ºæ–‡å­—ã€‘å¹¶ç¿»è¯‘ä¸ºç›®æ ‡è¯­è¨€ï¼Œç„¶åå¯¼å‡ºåŒè¯­å­—å¹•æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€å­—å¹•å’Œè§†é¢‘åˆå¹¶ã€‘é€‰æ‹©è§†é¢‘ï¼Œç„¶åå°†å·²æœ‰çš„å­—å¹•æ–‡ä»¶æ‹–æ‹½åˆ°å³ä¾§å­—å¹•åŒºï¼Œå°†æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€éƒ½è®¾ä¸ºå­—å¹•æ‰€ç”¨è¯­è¨€ã€ç„¶åé€‰æ‹©é…éŸ³ç±»å‹å’Œè§’è‰²ï¼Œå¼€å§‹æ‰§è¡Œ

ã€ä¸ºå­—å¹•åˆ›å»ºé…éŸ³ã€‘å°†æœ¬åœ°çš„å­—å¹•æ–‡ä»¶æ‹–æ‹½åˆ°å³ä¾§å­—å¹•ç¼–è¾‘å™¨ï¼Œç„¶åé€‰æ‹©ç›®æ ‡è¯­è¨€ã€é…éŸ³ç±»å‹å’Œè§’è‰²ï¼Œå°†ç”Ÿæˆé…éŸ³åçš„éŸ³é¢‘æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€éŸ³è§†é¢‘è¯†åˆ«æ–‡å­—ã€‘å°†è§†é¢‘æˆ–éŸ³é¢‘æ‹–æ‹½åˆ°è¯†åˆ«çª—å£ï¼Œå°†è¯†åˆ«å‡ºæ–‡å­—å¹¶å¯¼å‡ºä¸ºsrtå­—å¹•æ ¼å¼

ã€å°†æ–‡å­—åˆæˆè¯­éŸ³ã€‘å°†ä¸€æ®µæ–‡å­—æˆ–è€…å­—å¹•ï¼Œä½¿ç”¨æŒ‡å®šçš„é…éŸ³è§’è‰²ç”Ÿæˆé…éŸ³

ã€ä»è§†é¢‘åˆ†ç¦»éŸ³é¢‘ã€‘å°†è§†é¢‘æ–‡ä»¶åˆ†ç¦»ä¸ºéŸ³é¢‘æ–‡ä»¶å’Œæ— å£°è§†é¢‘

ã€éŸ³è§†é¢‘å­—å¹•åˆå¹¶ã€‘éŸ³é¢‘æ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ã€å­—å¹•æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªè§†é¢‘æ–‡ä»¶

ã€éŸ³è§†é¢‘æ ¼å¼è½¬æ¢ã€‘å„ç§æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢

ã€æ–‡å­—å­—å¹•ç¿»è¯‘ã€‘å°†æ–‡å­—æˆ–srtå­—å¹•æ–‡ä»¶ç¿»è¯‘ä¸ºå…¶ä»–è¯­è¨€


----



https://github.com/jianchang512/pyvideotrans/assets/3378335/7004ae61-37a8-4f33-9711-20fd4cc1a94a



# ä¸‹è½½windownsé¢„ç¼–è¯‘exeç‰ˆæœ¬(å…¶ä»–ç³»ç»Ÿä½¿ç”¨æºç éƒ¨ç½²)

0. [ç‚¹å‡»å»ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆ,è§£å‹ååŒå‡»sp.exe](https://github.com/jianchang512/pyvideotrans/releases)

1. è§£å‹åˆ°è‹±æ–‡è·¯å¾„ä¸‹ï¼Œå¹¶ä¸”è·¯å¾„ä¸­ä¸å«æœ‰ç©ºæ ¼ã€‚è§£å‹ååŒå‡» sp.exe (è‹¥é‡åˆ°æƒé™é—®é¢˜å¯å³é”®ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€)

3. æœªåšå…æ€ï¼Œæ€è½¯å¯èƒ½è¯¯æŠ¥ï¼Œå¯å¿½ç•¥æˆ–ä½¿ç”¨æºç éƒ¨ç½²

4. æ³¨æ„ï¼šå¿…é¡»è§£å‹åä½¿ç”¨ï¼Œä¸å¯ç›´æ¥å‹ç¼©åŒ…å†…åŒå‡»ä½¿ç”¨ï¼Œä¹Ÿä¸å¯è§£å‹åç§»åŠ¨sp.exeæ–‡ä»¶åˆ°å…¶ä»–ä½ç½®

5. [è§†é¢‘æ•™ç¨‹](https://github.com/jianchang512/pyvideotrans?tab=readme-ov-file#%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B%E7%AC%AC%E4%B8%89%E6%96%B9)



# æºç éƒ¨ç½²

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/drive/1yDGPWRyXeZ1GWqkOpdJDv4nA_88HNm01?usp=sharing)


1. é…ç½®å¥½ python 3.10->3.11 ç¯å¢ƒï¼Œå»ºè®®3.10
2. `git clone https://github.com/jianchang512/pyvideotrans`
3. `cd pyvideotrans`
4. `python -m venv venv`
5. winä¸‹æ‰§è¡Œ `%cd%/venv/scripts/activate`,linuxå’Œmacæ‰§è¡Œ `source ./venv/bin/activate`
6. `pip install -r requirements.txt`ï¼Œå¦‚æœé‡åˆ°ç‰ˆæœ¬å†²çªæŠ¥é”™ï¼Œè¯·ä½¿ç”¨ `pip install -r requirements.txt --no-deps` 

windows å’Œ linux å¦‚æœè¦å¯ç”¨cudaåŠ é€Ÿï¼Œç»§ç»­æ‰§è¡Œ `pip uninstall -y torch` å¸è½½ï¼Œç„¶åæ‰§è¡Œ`pip install torch==2.1.2 --index-url https://download.pytorch.org/whl/cu121`ã€‚(å¿…é¡»æœ‰Nå¡å¹¶ä¸”é…ç½®å¥½CUDAç¯å¢ƒ)

7. winä¸‹è§£å‹ ffmpeg.zip åˆ°æ ¹ç›®å½•ä¸‹ (ffmpeg.exeæ–‡ä»¶)ï¼Œlinuxå’Œmac è¯·è‡ªè¡Œå®‰è£… ffmpegï¼Œå…·ä½“æ–¹æ³•å¯"ç™¾åº¦ or Google"

8. `python sp.py` æ‰“å¼€è½¯ä»¶ç•Œé¢

9. å¦‚æœéœ€è¦æ”¯æŒCUDAåŠ é€Ÿï¼Œéœ€è¦è®¾å¤‡å…·æœ‰ NVIDIA æ˜¾å¡ï¼Œå…·ä½“å®‰è£…é˜²èŒƒè§ä¸‹æ–¹ [CUDAåŠ é€Ÿæ”¯æŒ](https://github.com/jianchang512/pyvideotrans?tab=readme-ov-file#cuda-%E5%8A%A0%E9%80%9F%E6%94%AF%E6%8C%81)


# ä½¿ç”¨æ–¹æ³•

1. åŸå§‹è§†é¢‘ï¼šç‚¹å‡»é€‰æ‹©mp4/avi/mov/mkv/mpegè§†é¢‘,å¯é€‰æ‹©å¤šä¸ªè§†é¢‘ï¼›

2. è¾“å‡ºè§†é¢‘ç›®å½•ï¼šå¦‚æœä¸é€‰æ‹©ï¼Œåˆ™é»˜è®¤ç”Ÿæˆåœ¨åŒç›®å½•ä¸‹çš„ `_video_out`ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•ä¸‹çš„srtæ–‡ä»¶å¤¹ä¸­å°†åˆ›å»ºåŸè¯­è¨€å’Œç›®æ ‡è¯­è¨€çš„ä¸¤ç§å­—å¹•æ–‡ä»¶

3. é€‰æ‹©ç¿»è¯‘ï¼šå¯é€‰ microsoft|google|baidu|tencent|chatGPT|Azure|Gemini|DeepL|DeepLX|OTT ç¿»è¯‘æ¸ é“

4. ç½‘ç»œä»£ç†åœ°å€ï¼šå¦‚æœä½ æ‰€åœ¨åœ°åŒºæ— æ³•ç›´æ¥è®¿é—® google/chatGPTï¼Œéœ€è¦åœ¨è½¯ä»¶ç•Œé¢ ç½‘ç»œä»£ç† ä¸­è®¾ç½®ä»£ç†ï¼Œæ¯”å¦‚è‹¥ä½¿ç”¨ v2ray ï¼Œåˆ™å¡«å†™ `http://127.0.0.1:10809`,è‹¥clashï¼Œåˆ™å¡«å†™ `http://127.0.0.1:7890`. å¦‚æœä½ ä¿®æ”¹äº†é»˜è®¤ç«¯å£æˆ–ä½¿ç”¨çš„å…¶ä»–ä»£ç†è½¯ä»¶ï¼Œåˆ™æŒ‰éœ€å¡«å†™

5. è§†é¢‘åŸå§‹è¯­è¨€ï¼šé€‰æ‹©å¾…ç¿»è¯‘è§†é¢‘é‡Œçš„è¯­è¨€ç§ç±»

6. ç¿»è¯‘ç›®æ ‡è¯­è¨€ï¼šé€‰æ‹©å¸Œæœ›ç¿»è¯‘åˆ°çš„è¯­è¨€ç§ç±»

7. é€‰æ‹©é…éŸ³ï¼šé€‰æ‹©ç¿»è¯‘ç›®æ ‡è¯­è¨€åï¼Œå¯ä»é…éŸ³é€‰é¡¹ä¸­ï¼Œé€‰æ‹©é…éŸ³è§’è‰²ï¼›
   
   ç¡¬å­—å¹•: æ˜¯æŒ‡å§‹ç»ˆæ˜¾ç¤ºå­—å¹•ï¼Œä¸å¯éšè—ï¼Œå¦‚æœå¸Œæœ›ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¹Ÿæœ‰å­—å¹•ï¼Œè¯·é€‰æ‹©ç¡¬å­—å¹•åµŒå…¥

   è½¯å­—å¹•: å¦‚æœæ’­æ”¾å™¨æ”¯æŒå­—å¹•ç®¡ç†ï¼Œå¯æ˜¾ç¤ºæˆ–è€…éšè—å­—å¹•ï¼Œè¯¥æ–¹å¼ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¸ä¼šæ˜¾ç¤ºå­—å¹•ï¼ŒæŸäº›å›½äº§æ’­æ”¾å™¨å¯èƒ½ä¸æ”¯æŒ,éœ€è¦å°†ç”Ÿæˆçš„è§†é¢‘åŒåsrtæ–‡ä»¶å’Œè§†é¢‘æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹æ‰ä¼šæ˜¾ç¤º


8. è¯­éŸ³è¯†åˆ«æ¨¡å‹: é€‰æ‹© base/small/medium/large-v3, è¯†åˆ«æ•ˆæœè¶Šæ¥è¶Šå¥½ï¼Œä½†è¯†åˆ«é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œæ‰€éœ€å†…å­˜è¶Šæ¥è¶Šå¤§ï¼Œå†…ç½®baseæ¨¡å‹ï¼Œå…¶ä»–æ¨¡å‹è¯·å•ç‹¬ä¸‹è½½åï¼Œè§£å‹æ”¾åˆ° `å½“å‰è½¯ä»¶ç›®å½•/models`ç›®å½•ä¸‹.å¦‚æœGPUæ˜¾å­˜ä½äº4Gï¼Œä¸è¦ä½¿ç”¨ large-v3

   æ•´ä½“è¯†åˆ«/é¢„å…ˆåˆ†å‰²: æ•´ä½“è¯†åˆ«æ˜¯æŒ‡ç›´æ¥å‘é€æ•´ä¸ªè¯­éŸ³æ–‡ä»¶ç»™æ¨¡å‹ï¼Œç”±æ¨¡å‹è¿›è¡Œå¤„ç†ï¼Œåˆ†å‰²å¯èƒ½æ›´ç²¾ç¡®ï¼Œä½†ä¹Ÿå¯èƒ½é€ å‡º30sé•¿åº¦çš„å•å­—å¹•ï¼Œé€‚åˆæœ‰æ˜ç¡®é™éŸ³çš„éŸ³é¢‘;  é¢„å…ˆåˆ†å‰²æ—¶æŒ‡å…ˆå°†éŸ³é¢‘æŒ‰10så·¦å³é•¿åº¦åˆ‡å‰²åå†åˆ†åˆ«å‘é€ç»™æ¨¡å‹å¤„ç†ã€‚

    [å…¨éƒ¨æ¨¡å‹ä¸‹è½½åœ°å€](https://github.com/jianchang512/stt/releases/tag/0.0)
    
    ä¸‹è½½åè§£å‹ï¼Œå°†å‹ç¼©åŒ…å†…çš„"models--Systran--faster-whisper-xx"æ–‡ä»¶å¤¹å¤åˆ¶åˆ°modelsç›®å½•å†…ï¼Œè§£å‹å¤åˆ¶å models ç›®å½•ä¸‹æ–‡ä»¶å¤¹åˆ—è¡¨å¦‚ä¸‹

    ![](https://github.com/jianchang512/stt/assets/3378335/5c972f7b-b0bf-4732-a6f1-253f42c45087)

    [FFmepgä¸‹è½½(ç¼–è¯‘ç‰ˆå·²è‡ªå¸¦)](https://www.ffmpeg.org/)

9. é…éŸ³è¯­é€Ÿï¼šå¡«å†™ -90åˆ°+90 ä¹‹é—´çš„æ•°å­—ï¼ŒåŒæ ·ä¸€å¥è¯åœ¨ä¸åŒè¯­è¨€è¯­éŸ³ä¸‹ï¼Œæ‰€éœ€æ—¶é—´æ˜¯ä¸åŒçš„ï¼Œå› æ­¤é…éŸ³åå¯èƒ½å£°ç”»å­—å¹•ä¸åŒæ­¥ï¼Œå¯ä»¥è°ƒæ•´æ­¤å¤„è¯­é€Ÿï¼Œè´Ÿæ•°ä»£è¡¨é™é€Ÿï¼Œæ­£æ•°ä»£è¡¨åŠ é€Ÿæ’­æ”¾ã€‚

10. éŸ³è§†é¢‘å¯¹é½: åˆ†åˆ«æ˜¯â€œé…éŸ³è‡ªåŠ¨åŠ é€Ÿâ€å’Œâ€œè§†é¢‘è‡ªåŠ¨é™é€Ÿâ€

>
> ç¿»è¯‘åä¸åŒè¯­è¨€ä¸‹å‘éŸ³æ—¶é•¿ä¸åŒï¼Œæ¯”å¦‚ä¸€å¥è¯ä¸­æ–‡3sï¼Œç¿»è¯‘ä¸ºè‹±æ–‡å¯èƒ½5sï¼Œå¯¼è‡´æ—¶é•¿å’Œè§†é¢‘ä¸ä¸€è‡´ã€‚
> 
> 2ç§è§£å†³æ–¹å¼:
>
>     1. å¼ºåˆ¶é…éŸ³åŠ é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿ç¼©çŸ­é…éŸ³æ—¶é•¿å’Œè§†é¢‘å¯¹é½
> 
>     2. å¼ºåˆ¶è§†é¢‘æ…¢é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿å»¶é•¿è§†é¢‘æ—¶é•¿å’Œé…éŸ³å¯¹é½ã€‚
> 
>


11. é™éŸ³ç‰‡æ®µ: å¡«å†™100åˆ°2000çš„æ•°å­—ï¼Œä»£è¡¨æ¯«ç§’ï¼Œé»˜è®¤ 500ï¼Œå³ä»¥å¤§äºç­‰äº 500ms çš„é™éŸ³ç‰‡æ®µä¸ºåŒºé—´åˆ†å‰²è¯­éŸ³

12. **CUDAåŠ é€Ÿ**ï¼šç¡®è®¤ä½ çš„ç”µè„‘æ˜¾å¡ä¸º Nå¡ï¼Œå¹¶ä¸”å·²é…ç½®å¥½CUDAç¯å¢ƒå’Œé©±åŠ¨ï¼Œåˆ™å¼€å¯é€‰æ‹©æ­¤é¡¹ï¼Œé€Ÿåº¦èƒ½æå¤§æå‡ï¼Œå…·ä½“é…ç½®æ–¹æ³•è§ä¸‹æ–¹[CUDAåŠ é€Ÿæ”¯æŒ](https://github.com/jianchang512/pyvideotrans?tab=readme-ov-file#cuda-%E5%8A%A0%E9%80%9F%E6%94%AF%E6%8C%81)

13. TTS: å¯ç”¨ edgeTTS å’Œ openai TTSæ¨¡å‹ä¸­é€‰æ‹©è¦åˆæˆè¯­éŸ³çš„è§’è‰²ï¼Œopenaiéœ€è¦ä½¿ç”¨å®˜æ–¹æ¥å£æˆ–è€…å¼€é€šäº†tts-1æ¨¡å‹çš„ä¸‰æ–¹æ¥å£,ä¹Ÿå¯é€‰æ‹©clone-voiceè¿›è¡ŒåŸéŸ³è‰²é…éŸ³

14. ç‚¹å‡» å¼€å§‹æŒ‰é’® åº•éƒ¨ä¼šæ˜¾ç¤ºå½“å‰è¿›åº¦å’Œæ—¥å¿—ï¼Œå³ä¾§æ–‡æœ¬æ¡†å†…æ˜¾ç¤ºå­—å¹•

15. å­—å¹•è§£æå®Œæˆåï¼Œå°†æš‚åœç­‰å¾…ä¿®æ”¹å­—å¹•ï¼Œå¦‚æœä¸åšä»»ä½•æ“ä½œï¼Œ60såå°†è‡ªåŠ¨ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ä¹Ÿå¯ä»¥åœ¨å³ä¾§å­—å¹•åŒºç¼–è¾‘å­—å¹•ï¼Œç„¶åæ‰‹åŠ¨ç‚¹å‡»ç»§ç»­åˆæˆ

16. å°†åœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸­è§†é¢‘åŒåçš„å­ç›®å½•å†…ï¼Œåˆ†åˆ«ç”Ÿæˆä¸¤ç§è¯­è¨€çš„å­—å¹•srtæ–‡ä»¶ã€åŸå§‹è¯­éŸ³å’Œé…éŸ³åçš„wavæ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿è¿›ä¸€æ­¥å¤„ç†

17. è®¾ç½®è¡Œè§’è‰²ï¼šå¯å¯¹å­—å¹•ä¸­çš„æ¯è¡Œè®¾å®šå‘éŸ³è§’è‰²ï¼Œé¦–å…ˆå·¦ä¾§é€‰å¥½TTSç±»å‹å’Œè§’è‰²ï¼Œç„¶åç‚¹å‡»å­—å¹•åŒºå³ä¸‹æ–¹â€œè®¾ç½®è¡Œè§’è‰²â€ï¼Œåœ¨æ¯ä¸ªè§’è‰²ååé¢æ–‡æœ¬ä¸­ä¸­ï¼Œå¡«å†™è¦ä½¿ç”¨è¯¥è§’è‰²é…éŸ³çš„è¡Œç¼–å·ï¼Œå¦‚ä¸‹å›¾ï¼š
    ![](./images/p2.png)

18. ä¿ç•™èƒŒæ™¯éŸ³ï¼šå¦‚æœé€‰æ‹©è¯¥é¡¹ï¼Œåˆ™ä¼šå…ˆå°†è§†é¢‘ä¸­çš„äººå£°å’ŒèƒŒæ™¯ä¼´å¥åˆ†ç¦»å‡ºæ¥ï¼Œå…¶ä¸­èƒŒæ™¯ä¼´å¥æœ€ç»ˆå†å’Œé…éŸ³éŸ³é¢‘åˆå¹¶ï¼Œæœ€åç”Ÿæˆçš„ç»“æœè§†é¢‘ä¸­å°†ä¿ç•™èƒŒæ™¯ä¼´å¥ã€‚**æ³¨æ„**:è¯¥åŠŸèƒ½åŸºäºuvr5å®ç°ï¼Œå¦‚æœä½ æ²¡æœ‰è¶³å¤Ÿçš„Nå¡GPUæ˜¾å­˜ï¼Œæ¯”å¦‚8Gä»¥ä¸Šï¼Œå»ºè®®æ…é‡é€‰æ‹©ï¼Œå¯èƒ½éå¸¸æ…¢å¹¶éå¸¸æ¶ˆè€—èµ„æºã€‚

19. åŸéŸ³è‰²å…‹éš†é…éŸ³ï¼šé¦–å…ˆå®‰è£…éƒ¨ç½²[clone-voice](https://github.com/jianchang512/clone-voice)é¡¹ç›®ï¼Œ ä¸‹è½½é…ç½®å¥½â€œæ–‡å­—->å£°éŸ³â€æ¨¡å‹ï¼Œç„¶ååœ¨æœ¬è½¯ä»¶ä¸­TTSç±»å‹ä¸­é€‰æ‹©â€œclone-voiceâ€,é…éŸ³è§’è‰²é€‰æ‹©â€œcloneâ€ï¼Œå³å¯å®ç°ä½¿ç”¨åŸå§‹è§†é¢‘ä¸­çš„å£°éŸ³è¿›è¡Œé…éŸ³ã€‚ä½¿ç”¨æ­¤æ–¹å¼æ—¶ï¼Œä¸ºä¿è¯æ•ˆæœï¼Œå°†å¼ºåˆ¶è¿›è¡Œâ€œäººå£°èƒŒæ™¯ä¹åˆ†ç¦»â€ã€‚è¯·æ³¨æ„æ­¤åŠŸèƒ½è¾ƒæ…¢ï¼Œå¹¶ä¸”æ¯”è¾ƒæ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚

20. åœ¨ `videotrans/chatgpt.txt` `videotrans/azure.txt` `videotrans/gemini.txt` æ–‡ä»¶ä¸­ï¼Œå¯åˆ†åˆ«ä¿®æ”¹ chatGPTã€AzureGPTã€Gemini Pro çš„æç¤ºè¯ï¼Œå¿…é¡»æ³¨æ„é‡Œé¢çš„ `{lang}` ä»£è¡¨ç¿»è¯‘åˆ°çš„ç›®æ ‡è¯­è¨€ï¼Œä¸è¦åˆ é™¤ä¸è¦ä¿®æ”¹ã€‚æç¤ºè¯éœ€è¦ä¿è¯å‘ŠçŸ¥AIå°†æŒ‰è¡Œå‘ç»™å®ƒçš„å†…å®¹ç¿»è¯‘åæŒ‰è¡Œè¿”å›ï¼Œè¿”å›çš„è¡Œæ•°éœ€è¦åŒå‘ç»™å®ƒçš„è¡Œæ•°ä¸€è‡´ã€‚



# å¸¸è§é—®é¢˜

1. ä½¿ç”¨googleç¿»è¯‘æˆ–è€…chatGPTï¼Œæç¤ºå‡ºé”™

   å›½å†…ä½¿ç”¨googleæˆ–chatGPTå®˜æ–¹æ¥å£ï¼Œéƒ½éœ€è¦æŒ‚æ¢¯å­

2. å·²ä½¿ç”¨äº†å…¨å±€ä»£ç†ï¼Œä½†çœ‹èµ·æ¥å¹¶æ²¡æœ‰èµ°ä»£ç†

   éœ€è¦åœ¨è½¯ä»¶ç•Œé¢â€œç½‘ç»œä»£ç†â€ä¸­è®¾ç½®å…·ä½“çš„ä»£ç†åœ°å€ï¼Œæ ¼å¼ä¸º http://127.0.0.1:ç«¯å£å·

3. æç¤º FFmepg ä¸å­˜åœ¨

   é¦–å…ˆæŸ¥çœ‹ç¡®å®šè½¯ä»¶æ ¹ç›®å½•ä¸‹å­˜åœ¨ ffmpeg.exe, ffprobe.exe æ–‡ä»¶æˆ–æ˜¯å¦å­˜åœ¨ffmpegç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè§£å‹ ffmpeg.7zï¼Œå°†è¿™2ä¸ªæ–‡ä»¶æ”¾åˆ°è½¯ä»¶æ ¹ç›®å½•ä¸‹

4. windowsä¸Šå¼€å¯äº† CUDAï¼Œä½†æ˜¯æç¤ºé”™è¯¯

   A: [é¦–å…ˆæŸ¥çœ‹è¯¦ç»†å®‰è£…æ–¹æ³•](https://juejin.cn/post/7318704408727519270)ï¼Œç¡®å®šä½ å·²æ­£ç¡®å®‰è£…äº†cudaç›¸å…³å·¥å…·ï¼Œå¦‚æœä»å­˜åœ¨é”™è¯¯ï¼Œ[ç‚¹å‡»ä¸‹è½½ cuBLAS](https://github.com/jianchang512/stt/releases/download/0.0/cuBLAS_win.7z)ï¼Œè§£å‹åå°†é‡Œé¢çš„dllæ–‡ä»¶å¤åˆ¶åˆ° C:/Windows/System32ä¸‹

   B: è‹¥ç¡®å®šå’ŒAæ— å…³ï¼Œé‚£ä¹ˆè¯·æ£€æŸ¥è§†é¢‘æ˜¯å¦æ˜¯H264ç¼–ç çš„mp4ï¼Œæœ‰äº›é«˜æ¸…è§†é¢‘æ˜¯ H265 ç¼–ç çš„ï¼Œè¿™ç§ä¸æ”¯æŒï¼Œå¯å°è¯•åœ¨â€œè§†é¢‘å·¥å…·ç®±â€ä¸­è½¬ä¸ºH264è§†é¢‘

   C: GPUä¸‹å¯¹è§†é¢‘è¿›è¡Œç¡¬ä»¶è§£ç ç¼–ç å¯¹æ•°æ®æ­£ç¡®æ€§è¦æ±‚ä¸¥æ ¼ï¼Œå®¹é”™ç‡å‡ ä¹ä¸º0ï¼Œä»»ä½•ä¸€ç‚¹é”™è¯¯éƒ½ä¼šå¯¼è‡´å¤±è´¥ï¼ŒåŠ ä¸Šæ˜¾å¡å‹å·ã€é©±åŠ¨ç‰ˆæœ¬ã€CUDAç‰ˆæœ¬ã€ffmpegç‰ˆæœ¬ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ç­‰ï¼Œå¯¼è‡´å¾ˆå®¹æ˜“å‡ºç°å…¼å®¹æ€§é”™è¯¯ã€‚ç›®å‰åŠ äº†å›é€€ï¼ŒGPUä¸Šå¤±è´¥åè‡ªåŠ¨ä½¿ç”¨CPUè½¯ä»¶ç¼–è§£ç ã€‚å¤±è´¥æ—¶logsç›®å½•ä¸‹æ—¥å¿—é‡Œä¼šè®°å½•å‡ºé”™ä¿¡æ¯ã€‚

5. æç¤ºæ¨¡å‹ä¸å­˜åœ¨

   åœ¨ 0.985 ç‰ˆæœ¬ä¹‹åï¼Œæ¨¡å‹éœ€è¦é‡æ–°å®‰è£…ï¼Œmodelsç›®å½•ä¸‹æ˜¯å„ä¸ªæ¨¡å‹çš„æ–‡ä»¶å¤¹ï¼Œè€Œä¸æ˜¯ptæ–‡ä»¶ã€‚
   è¦ä½¿ç”¨baseæ¨¡å‹ï¼Œè¦ä¿è¯ models/models--Systran--faster-whisper-base æ–‡ä»¶å¤¹å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œéœ€è¦ä¸‹è½½åå°†è¯¥æ–‡ä»¶å¤¹å¤åˆ¶åˆ° modelsä¸‹ã€‚
   è¦ä½¿ç”¨smallæ¨¡å‹ï¼Œè¦ä¿è¯ models/models--Systran--faster-whisper-small æ–‡ä»¶å¤¹å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œéœ€è¦ä¸‹è½½åå°†è¯¥æ–‡ä»¶å¤¹å¤åˆ¶åˆ° modelsä¸‹ã€‚
   è¦ä½¿ç”¨mediumæ¨¡å‹ï¼Œè¦ä¿è¯ models/models--Systran--faster-whisper-medium æ–‡ä»¶å¤¹å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œéœ€è¦ä¸‹è½½åå°†è¯¥æ–‡ä»¶å¤¹å¤åˆ¶åˆ° modelsä¸‹ã€‚
   è¦ä½¿ç”¨large-v3æ¨¡å‹ï¼Œè¦ä¿è¯ models/models--Systran--faster-whisper-large-v3 æ–‡ä»¶å¤¹å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œéœ€è¦ä¸‹è½½åå°†è¯¥æ–‡ä»¶å¤¹å¤åˆ¶åˆ° modelsä¸‹ã€‚

   [å…¨éƒ¨æ¨¡å‹ä¸‹è½½åœ°å€](https://github.com/jianchang512/stt/releases/tag/0.0)

6. æç¤ºç›®å½•ä¸å­˜åœ¨æˆ–æƒé™é”™è¯¯

   åœ¨sp.exeä¸Šå³é”®ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€

7. æç¤ºé”™è¯¯ï¼Œä½†æ²¡æœ‰è¯¦ç»†å‡ºé”™ä¿¡æ¯

   æ‰“å¼€logsç›®å½•ï¼Œæ‰¾åˆ°æœ€æ–°çš„logæ—¥å¿—æ–‡ä»¶ï¼Œæ‹‰åˆ°æœ€åº•éƒ¨ï¼Œå³å¯çœ‹åˆ°æŠ¥é”™ä¿¡æ¯ã€‚

8. large-v3æ¨¡å‹éå¸¸æ…¢

   å¦‚æœä½ æ²¡æœ‰Nå¡GPUï¼Œæˆ–è€…æ²¡æœ‰é…ç½®å¥½CUDAç¯å¢ƒï¼Œæˆ–è€…æ˜¾å­˜ä½äº8Gï¼Œè¯·ä¸è¦ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå¦åˆ™ä¼šéå¸¸æ…¢å’Œå¡é¡¿

9. æç¤ºç¼ºå°‘cublasxx.dllæ–‡ä»¶

   æœ‰æ—¶ä¼šé‡åˆ°â€œcublasxx.dllä¸å­˜åœ¨â€çš„é”™è¯¯ï¼Œæ­¤æ—¶éœ€è¦ä¸‹è½½ cuBLASï¼Œç„¶åå°†dllæ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿç›®å½•ä¸‹

   [ç‚¹å‡»ä¸‹è½½ cuBLAS](https://github.com/jianchang512/stt/releases/download/0.0/cuBLAS_win.7z) ï¼Œè§£å‹åå°†é‡Œé¢çš„dllæ–‡ä»¶å¤åˆ¶åˆ° C:/Windows/System32ä¸‹
   
   [cuBLAS.and.cuDNN_win_v4](https://github.com/Purfview/whisper-standalone-win/releases/download/libs/cuBLAS.and.cuDNN_win_v4.7z)


11. æ€æ ·ä½¿ç”¨è‡ªå®šä¹‰éŸ³è‰²
   
   ç›®å‰æš‚ä¸æ”¯æŒè¯¥åŠŸèƒ½ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨[clone-voiceè¿›è¡ŒåŸéŸ³è‰²é…éŸ³](https://github.com/jiangchang512/clone-voice)
   
13. å­—å¹•è¯­éŸ³æ— æ³•å¯¹é½

> ç¿»è¯‘åä¸åŒè¯­è¨€ä¸‹å‘éŸ³æ—¶é•¿ä¸åŒï¼Œæ¯”å¦‚ä¸€å¥è¯ä¸­æ–‡3sï¼Œç¿»è¯‘ä¸ºè‹±æ–‡å¯èƒ½5sï¼Œå¯¼è‡´æ—¶é•¿å’Œè§†é¢‘ä¸ä¸€è‡´ã€‚
> 
> 2ç§è§£å†³æ–¹å¼:
> 
>     1. å¼ºåˆ¶é…éŸ³åŠ é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿ç¼©çŸ­é…éŸ³æ—¶é•¿å’Œè§†é¢‘å¯¹é½
> 
>     2. å¼ºåˆ¶è§†é¢‘æ…¢é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿å»¶é•¿è§†é¢‘æ—¶é•¿å’Œé…éŸ³å¯¹é½ã€‚
> 



14. å­—å¹•ä¸æ˜¾ç¤ºæˆ–æ˜¾ç¤ºä¹±ç 

> 
> é‡‡ç”¨è½¯åˆæˆå­—å¹•ï¼šå­—å¹•ä½œä¸ºå•ç‹¬æ–‡ä»¶åµŒå…¥è§†é¢‘ï¼Œå¯å†æ¬¡æå–å‡ºï¼Œå¦‚æœæ’­æ”¾å™¨æ”¯æŒï¼Œå¯åœ¨æ’­æ”¾å™¨å­—å¹•ç®¡ç†ä¸­å¯ç”¨æˆ–ç¦ç”¨å­—å¹•ï¼›
> 
> æ³¨æ„å¾ˆå¤šå›½å†…æ’­æ”¾å™¨å¿…é¡»å°†srtå­—å¹•æ–‡ä»¶å’Œè§†é¢‘æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ä¸”åå­—ç›¸åŒï¼Œæ‰èƒ½åŠ è½½è½¯å­—å¹•ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦å°†srtæ–‡ä»¶è½¬ä¸ºGBKç¼–ç ï¼Œå¦åˆ™æ˜¾ç¤ºä¹±ç ï¼Œ
> 

15. å¦‚ä½•åˆ‡æ¢è½¯ä»¶ç•Œé¢è¯­è¨€/ä¸­æ–‡orè‹±æ–‡

è½¯ä»¶ç›®å½•ä¸‹å¦‚æœä¸å­˜åœ¨ set.ini æ–‡ä»¶åˆ™å…ˆåˆ›å»ºï¼Œç„¶åå°†ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°å†…ï¼Œ`lang=`åå¡«å†™è¯­è¨€ä»£ç ï¼Œ`zh`ä»£è¡¨ä¸­æ–‡,`en`ä»£è¡¨è‹±æ–‡ï¼Œç„¶åé‡å¯è½¯ä»¶

```

[GUI]
;GUI show language ,set en or zh  eg.  lang=en
lang =

```

16. å°šæœªæ‰§è¡Œå®Œæ¯•å°±é—ªé€€

å¦‚æœå¯ç”¨äº†cudaå¹¶ä¸”ç”µè„‘å·²å®‰è£…å¥½äº†cudaç¯å¢ƒï¼Œä½†æ²¡æœ‰æ‰‹åŠ¨å®‰è£…é…ç½®è¿‡cudnnï¼Œé‚£ä¹ˆä¼šå‡ºç°è¯¥é—®é¢˜ï¼Œå»å®‰è£…å’ŒcudaåŒ¹é…çš„cudnnã€‚æ¯”å¦‚ä½ å®‰è£…äº†cuda12.3ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸‹è½½cudnn for cuda12.xå‹ç¼©åŒ…ï¼Œç„¶åè§£å‹åé‡Œé¢çš„3ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°cudaå®‰è£…ç›®å½•ä¸‹ã€‚å…·ä½“æ•™ç¨‹å‚è€ƒ 
https://juejin.cn/post/7318704408727519270


å¦‚æœcudnnæŒ‰ç…§æ•™ç¨‹å®‰è£…å¥½äº†ä»é—ªé€€ï¼Œé‚£ä¹ˆæå¤§æ¦‚ç‡æ˜¯GPUæ˜¾å­˜ä¸è¶³ï¼Œå¯ä»¥æ”¹ä¸ºä½¿ç”¨ mediumæ¨¡å‹ï¼Œæ˜¾å­˜ä¸è¶³8Gæ—¶ï¼Œå°½é‡é¿å…ä½¿ç”¨largev-3æ¨¡å‹ï¼Œå°¤å…¶æ˜¯è§†é¢‘å¤§äº20Mæ—¶ï¼Œå¦åˆ™å¯èƒ½æ˜¾å­˜ä¸è¶³è€Œå´©æºƒ


# é«˜çº§è®¾ç½® videotrans/set.ini

**è¯·å‹¿éšæ„è°ƒæ•´ï¼Œé™¤éä½ çŸ¥é“å°†ä¼šå‘ç”Ÿä»€ä¹ˆ**

```

;GUI show language ,set en or zh  eg.  lang=en
;é»˜è®¤ç•Œé¢è·Ÿéšç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥åœ¨æ­¤æ‰‹åŠ¨æŒ‡å®šï¼Œzh=ä¸­æ–‡ç•Œé¢ï¼Œen=è‹±æ–‡ç•Œé¢
lang =

;0=video lossless processing but slow processing due to large size, 51=fast processing due to small size but lowest quality, default to 13
;è§†é¢‘å¤„ç†è´¨é‡ï¼Œ0-51çš„æ•´æ•°ï¼Œ0=æ— æŸå¤„ç†å°ºå¯¸è¾ƒå¤§é€Ÿåº¦å¾ˆæ…¢ï¼Œ51=è´¨é‡æœ€ä½å°ºå¯¸æœ€å°å¤„ç†é€Ÿåº¦æœ€å¿«
crf=13

;dubbing thread at same time, > 5 or greater may be forbid by api
;åŒæ—¶é…éŸ³çš„æ•°é‡ï¼Œ1-10ï¼Œå»ºè®®ä¸è¦å¤§äº5ï¼Œå¦åˆ™å®¹æ˜“å¤±è´¥
dubbing_thread=5

;Simultaneous translation lines
;åŒæ—¶ç¿»è¯‘çš„æ•°é‡ï¼Œ1-20ï¼Œä¸è¦å¤ªå¤§ï¼Œå¦åˆ™å¯èƒ½è§¦å‘ç¿»è¯‘apié¢‘ç‡é™åˆ¶
trans_thread=15

;ç¿»è¯‘å‡ºé”™åé‡è¯•æ¬¡æ•°
retries=5

;countdown sec
;å­—å¹•è¯†åˆ«å®Œæˆç­‰å¾…ç¿»è¯‘å‰çš„æš‚åœç§’æ•°ï¼Œå’Œç¿»è¯‘å®Œç­‰å¾…é…éŸ³çš„æš‚åœç§’æ•°
countdown_sec=30

;Accelerator cuvid or cuda
;ç¡¬ä»¶ç¼–ç è®¾å¤‡ï¼Œcuvidæˆ–cuda
hwaccel=cuvid

; Accelerator output format = cuda or nv12
;ç¡¬ä»¶è¾“å‡ºæ ¼å¼ï¼Œnv12æˆ–cuda
hwaccel_output_format=nv12

;not decode video before use -c:v h264_cuvid,false=use -c:v h264_cuvid, true=dont use
;æ˜¯å¦ç¦ç”¨ç¡¬ä»¶è§£ç ï¼Œtrue=ç¦ç”¨ï¼Œå…¼å®¹æ€§å¥½ï¼›false=å¯ç”¨ï¼Œå¯èƒ½æŸäº›ç¡¬ä»¶ä¸Šæœ‰å…¼å®¹é”™è¯¯
no_decode=true

;cuda data type int8 float16 float32, More and more graphics memory is being occupied
;ä»è§†é¢‘ä¸­è¯†åˆ«å­—å¹•æ—¶çš„cudaæ•°æ®ç±»å‹ï¼Œint8=æ¶ˆè€—èµ„æºå°‘ï¼Œé€Ÿåº¦å¿«ï¼Œç²¾åº¦ä½ï¼Œfloat32=æ¶ˆè€—èµ„æºå¤šï¼Œé€Ÿåº¦æ…¢ï¼Œç²¾åº¦é«˜ï¼Œint8_float16=è®¾å¤‡è‡ªé€‰
cuda_com_type=int8

; whisper thread 0 is equal cpu core, 
;å­—å¹•è¯†åˆ«æ—¶ï¼Œcpuè¿›ç¨‹
whisper_threads=4

;whisper num_worker
;å­—å¹•è¯†åˆ«æ—¶ï¼ŒåŒæ—¶å·¥ä½œè¿›ç¨‹
whisper_worker=1

;Reducing these two numbers will use less graphics memory
;å­—å¹•è¯†åˆ«æ—¶ç²¾åº¦è°ƒæ•´ï¼Œ1-5ï¼Œ1=æ¶ˆè€—èµ„æºæœ€ä½ï¼Œ5=æ¶ˆè€—æœ€å¤šï¼Œå¦‚æœæ˜¾å­˜å……è¶³ï¼Œå¯ä»¥è®¾ä¸º5ï¼Œå¯èƒ½ä¼šå–å¾—æ›´ç²¾ç¡®çš„è¯†åˆ«ç»“æœ
beam_size=1
best_of=1

;vad set to false,use litter GPU memory,true is more
;å­—å¹•è¯†åˆ«æ—¶å¯ç”¨è‡ªå®šä¹‰é™éŸ³åˆ†å‰²ç‰‡æ®µï¼Œtrue=å¯ç”¨ï¼Œæ˜¾å­˜ä¸è¶³æ—¶ï¼Œå¯ä»¥è®¾ä¸ºfalseç¦ç”¨
vad=true

;0 is use litter GPU,other is more
;0=å ç”¨æ›´å°‘GPUèµ„æºï¼Œ1=å ç”¨æ›´å¤šGPU
temperature=0

;false is litter GPU,ture is more
;åŒ temperature, true=å ç”¨æ›´å¤šGPUï¼Œfalse=å ç”¨æ›´å°‘GPU
condition_on_previous_text=false


```



# CUDA åŠ é€Ÿæ”¯æŒ

**å®‰è£…CUDAå·¥å…·** [è¯¦ç»†å®‰è£…æ–¹æ³•](https://juejin.cn/post/7318704408727519270)

å¿…é¡» cudaå’Œcudnnéƒ½å®‰è£…å¥½ï¼Œå¦åˆ™å¯èƒ½ä¼šé—ªé€€ã€‚


å®‰è£…å®Œæˆåæ‰§è¡Œ `python testcuda.py` æˆ– åŒå‡» testcuda.exe å¦‚æœè¾“å‡ºå‡æ˜¯  ok ,è¯´æ˜å¯ç”¨  

æœ‰æ—¶ä¼šé‡åˆ°â€œcublasxx.dllä¸å­˜åœ¨â€çš„é”™è¯¯, æˆ–è€…æœªé‡åˆ°æ­¤é”™è¯¯ï¼Œå¹¶ä¸”CUDAé…ç½®æ­£ç¡®ï¼Œä½†å§‹ç»ˆå‡ºç°è¯†åˆ«é”™è¯¯ï¼Œéœ€è¦ä¸‹è½½ cuBLASï¼Œç„¶åå°†dllæ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿç›®å½•ä¸‹

[ç‚¹å‡»ä¸‹è½½ cuBLAS](https://github.com/jianchang512/stt/releases/download/0.0/cuBLAS_win.7z)ï¼Œè§£å‹åå°†é‡Œé¢çš„dllæ–‡ä»¶å¤åˆ¶åˆ° C:/Windows/System32ä¸‹




# CLI å‘½ä»¤è¡Œæ¨¡å¼

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/drive/1yDGPWRyXeZ1GWqkOpdJDv4nA_88HNm01?usp=sharing)


cli.py æ˜¯å‘½ä»¤è¡Œæ‰§è¡Œè„šæœ¬ï¼Œ`python cli.py` æ˜¯æœ€ç®€å•çš„æ‰§è¡Œæ–¹å¼

æ¥æ”¶çš„å‚æ•°:

`-m mp4è§†é¢‘çš„ç»å¯¹åœ°å€`

å…·ä½“å„é¡¹é…ç½®å‚æ•°å¯åœ¨ ä½äº cli.py åŒç›®å½•çš„ cli.ini ä¸­é…ç½®ï¼Œå…¶ä»–å¾…å¤„ç†çš„mp4è§†é¢‘åœ°å€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•° `-m mp4è§†é¢‘ç»å¯¹åœ°å€` æ–¹å¼æ¥é…ç½®ï¼Œæ¯”å¦‚ `python cli.py -m D:/1.mp4`.

cli.ini é‡Œæ˜¯å„é¡¹å®Œæ•´å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°`source_mp4`å³ä»£è¡¨å¾…å¤„ç†çš„è§†é¢‘ï¼Œå¦‚æœå‘½ä»¤è¡Œé€šè¿‡ -m ä¼ å‚ï¼Œåˆ™ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼Œå¦åˆ™ä½¿ç”¨æ­¤`source_mp4`.

`-c é…ç½®æ–‡ä»¶åœ°å€`

ä½ ä¹Ÿå¯ä»¥å¤åˆ¶ cli.ini åˆ°å…¶ä»–ä½ç½®åï¼Œé€šè¿‡å‘½ä»¤è¡Œä¸Š `-c cli.iniçš„ç»å¯¹è·¯å¾„åœ°å€` æ¥æŒ‡å®šè¦ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ `python cli.py -c E:/conf/cli.ini`, åˆ™ä¼šä½¿ç”¨è¯¥æ–‡ä»¶é‡Œçš„é…ç½®ä¿¡æ¯ï¼Œè€Œå¿½ç•¥é¡¹ç›®ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚

`-cuda`æ— éœ€åè·Ÿå€¼ï¼Œåªè¦æ·»åŠ å³ä»£è¡¨å¯ç”¨CUDAåŠ é€Ÿ(å¦‚æœå¯ç”¨) `python cli.py -cuda`

ç¤ºä¾‹:`python cli.py -cuda -m D:/1.mp4`

## cli.iniå†…å…·ä½“å‚æ•°å’Œè¯´æ˜

```
;å‘½ä»¤è¡Œå‚æ•°
;å¾…å¤„ç†çš„è§†é¢‘ç»å¯¹åœ°å€ï¼Œæ­£æ–œæ åšè·¯å¾„åˆ†éš”ç¬¦ï¼Œä¹Ÿå¯åœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­ -m åä¼ é€’
source_mp4=
;ç½‘ç»œä»£ç†åœ°å€ï¼Œgoogle  chatGPTå®˜æ–¹chinaå¿…å¡«
proxy=http://127.0.0.1:10809
;è¾“å‡ºç»“æœæ–‡ä»¶åˆ°ç›®å½•
target_dir=
;è§†é¢‘å‘éŸ³è¯­è¨€ï¼Œä»è¿™é‡Œé€‰æ‹© zh-cn zh-tw en fr de ja ko ru es th it pt vi ar tr
source_language=zh-cn
;è¯­éŸ³è¯†åˆ«è¯­è¨€ æ— éœ€å¡«å†™
detect_language=
;ç¿»è¯‘åˆ°çš„è¯­è¨€ zh-cn zh-tw en fr de ja ko ru es th it pt vi ar tr
target_language=en
;è½¯å­—å¹•åµŒå…¥æ—¶çš„è¯­è¨€ï¼Œä¸å¡«å†™
subtitle_language=
;true=å¯ç”¨CUDA
cuda=false
;è§’è‰²åç§°ï¼ŒopenaiTTSè§’è‰²åç§°â€œalloy,echo,fable,onyx,nova,shimmerâ€ï¼ŒedgeTTSè§’è‰²åç§°ä» voice_list.json ä¸­å¯¹åº”è¯­è¨€çš„è§’è‰²ä¸­å¯»æ‰¾ã€‚elevenlabsTTS çš„è§’è‰²åç§°ä» elevenlabs.json ä¸­å¯»æ‰¾
voice_role=en-CA-ClaraNeural
; é…éŸ³åŠ é€Ÿå€¼ï¼Œå¿…é¡»ä»¥ + å·æˆ– - å·å¼€å¤´ï¼Œ+ä»£è¡¨åŠ é€Ÿï¼Œ-ä»£è¡¨å‡é€Ÿï¼Œä»¥%ç»“å°¾
voice_rate=+0%
;å¯é€‰ edgetTTS  openaiTTS elevenlabsTTS
tts_type=edgeTTS
;é™éŸ³ç‰‡æ®µï¼Œå•ä½ms
voice_silence=500
;all=æ•´ä½“è¯†åˆ«ï¼Œsplit=é¢„å…ˆåˆ†å‰²å£°éŸ³ç‰‡æ®µåè¯†åˆ«
whisper_type=all
;è¯­éŸ³è¯†åˆ«æ¨¡å‹å¯é€‰ï¼Œbase small medium large-v3
whisper_model=base
;ç¿»è¯‘æ¸ é“ï¼Œå¯é€‰ google baidu  chatGPT Azure  Gemini  tencent DeepL DeepLX
translate_type=google
;0=ä¸åµŒå…¥å­—å¹•ï¼Œ1=åµŒå…¥ç¡¬å­—å¹•ï¼Œ2=åµŒå…¥è½¯å­—å¹•
subtitle_type=1
;true=é…éŸ³è‡ªåŠ¨åŠ é€Ÿ
voice_autorate=false
;true=è§†é¢‘è‡ªåŠ¨æ…¢é€Ÿ
video_autorate=false
;deeplç¿»è¯‘çš„æ¥å£åœ°å€
deepl_authkey=asdgasg
;è‡ªå·±é…ç½®çš„deeplxæœåŠ¡çš„æ¥å£åœ°å€
deeplx_address=http://127.0.0.1:1188
;è…¾è®¯ç¿»è¯‘id
tencent_SecretId=
;è…¾è®¯ç¿»è¯‘key
tencent_SecretKey=
;ç™¾åº¦ç¿»è¯‘id
baidu_appid=
;ç™¾åº¦ç¿»è¯‘å¯†é’¥
baidu_miyue=
; elevenlabsttsçš„key
elevenlabstts_key=
;chatGPT æ¥å£åœ°å€ï¼Œä»¥ /v1 ç»“å°¾ï¼Œå¯å¡«å†™ç¬¬ä¸‰æ–¹æ¥å£åœ°å€
chatgpt_api=
;chatGPTçš„key
chatgpt_key=
;chatGPTæ¨¡å‹ï¼Œå¯é€‰ gpt-3.5-turbo gpt-4
chatgpt_model=gpt-3.5-turbo
; Azure çš„apiæ¥å£åœ°å€
azure_api=
;Azureçš„key
azure_key=
; Azureçš„æ¨¡å‹åï¼Œå¯é€‰ gpt-3.5-turbo gpt-4
azure_model=gpt-3.5-turbo
;google Gemini çš„key
gemini_key=

```



# è§†é¢‘æ•™ç¨‹(ç¬¬ä¸‰æ–¹)

[Macä¸‹æºç éƒ¨ç½²/bç«™](https://www.bilibili.com/video/BV1tK421y7rd/)

[ç”¨Gemini Api ç»™è§†é¢‘ç¿»è¯‘è®¾ç½®æ–¹æ³•/bç«™](https://b23.tv/fED1dS3)

[å¦‚ä½•ä¸‹è½½å’Œå®‰è£…](https://www.bilibili.com/video/BV1Gy42187PK/?vd_source=7ccebed8eb1a03b941620c1590dc1b0f)




# è½¯ä»¶é¢„è§ˆæˆªå›¾

![image](https://github.com/jianchang512/pyvideotrans/assets/3378335/d60407ca-3b17-43d9-9d13-5bcf5396dbce)


[Youtube](https://youtu.be/0Qo6nw2OCg4)


# ç›¸å…³è”é¡¹ç›®

[OTT:æœ¬åœ°ç¦»çº¿æ–‡å­—ç¿»è¯‘å·¥å…·](https://github.com/jianchang512/ott)

[å£°éŸ³å…‹éš†å·¥å…·:ç”¨ä»»æ„éŸ³è‰²åˆæˆè¯­éŸ³](https://github.com/jianchang512/clone-voice)

[è¯­éŸ³è¯†åˆ«å·¥å…·:æœ¬åœ°ç¦»çº¿çš„è¯­éŸ³è¯†åˆ«è½¬æ–‡å­—å·¥å…·](https://github.com/jianchang512/stt)

[äººå£°èƒŒæ™¯ä¹åˆ†ç¦»:äººå£°å’ŒèƒŒæ™¯éŸ³ä¹åˆ†ç¦»å·¥å…·](https://github.com/jianchang512/vocal-separate)


## è‡´è°¢

> æœ¬ç¨‹åºä¸»è¦ä¾èµ–çš„éƒ¨åˆ†å¼€æºé¡¹ç›®

1. ffmpeg
2. PySide6
3. edge-tts
4. faster-whisper


