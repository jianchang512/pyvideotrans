[English Readme](./README_EN.md)  /  [ğŸ‘‘æåŠ©è¯¥é¡¹ç›®](./about.md) / Qç¾¤ 905857759 / å¾®ä¿¡å…¬ä¼—å·ï¼šæœä¸€æœâ€œ pyvideotrans â€

# è§†é¢‘ç¿»è¯‘å’Œé…éŸ³å·¥å…·

>
> è¿™æ˜¯ä¸€ä¸ªè§†é¢‘ç¿»è¯‘é…éŸ³å·¥å…·ï¼Œå¯å°†ä¸€ç§è¯­è¨€çš„è§†é¢‘ç¿»è¯‘ä¸ºæŒ‡å®šè¯­è¨€çš„è§†é¢‘ï¼Œè‡ªåŠ¨ç”Ÿæˆå’Œæ·»åŠ è¯¥è¯­è¨€çš„å­—å¹•å’Œé…éŸ³ã€‚
>
> è¯­éŸ³è¯†åˆ«ä½¿ç”¨ `faster-whisper` `openai-whisper` ç¦»çº¿æ¨¡å‹.
>
> æ–‡å­—ç¿»è¯‘æ”¯æŒ `microsoft|google|baidu|tencent|chatGPT|Azure|Gemini|DeepL|DeepLX|ç¦»çº¿ç¿»è¯‘OTT` ï¼Œ
>
> æ–‡å­—åˆæˆè¯­éŸ³æ”¯æŒ `Microsoft Edge tts` `Openai TTS-1` `Elevenlabs TTS` `è‡ªå®šä¹‰TTSæœåŠ¡å™¨api` `GPT-SoVITS` [clone-voice](https://github.com/jianchang512/clone-voice)
>
> å…è®¸ä¿ç•™èƒŒæ™¯ä¼´å¥éŸ³ä¹ç­‰(åŸºäºuvr5)
> 
> æ”¯æŒçš„è¯­è¨€ï¼šä¸­æ–‡ç®€ç¹ã€è‹±è¯­ã€éŸ©è¯­ã€æ—¥è¯­ã€ä¿„è¯­ã€æ³•è¯­ã€å¾·è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­ã€è‘¡è„ç‰™è¯­ã€è¶Šå—è¯­ã€æ³°å›½è¯­ã€é˜¿æ‹‰ä¼¯è¯­ã€åœŸè€³å…¶è¯­ã€åŒˆç‰™åˆ©è¯­ã€å°åº¦è¯­



# ä¸»è¦ç”¨é€”å’Œä½¿ç”¨æ–¹å¼

ã€ç¿»è¯‘è§†é¢‘å¹¶é…éŸ³ã€‘æ ¹æ®éœ€è¦è®¾ç½®å„ä¸ªé€‰é¡¹ï¼Œè‡ªç”±é…ç½®ç»„åˆï¼Œå®ç°ç¿»è¯‘å’Œé…éŸ³ã€è‡ªåŠ¨åŠ å‡é€Ÿã€åˆå¹¶ç­‰

ã€è¯†åˆ«å­—å¹•ä¸ç¿»è¯‘ã€‘é€‰æ‹©è§†é¢‘æ–‡ä»¶ï¼Œé€‰æ‹©è§†é¢‘æºè¯­è¨€ï¼Œåˆ™ä»è§†é¢‘ã€è¯­éŸ³ä¸­è¯†åˆ«å‡ºæ–‡å­—ã€‘å¹¶è‡ªåŠ¨å¯¼å‡ºå­—å¹•æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€æå–å­—å¹•å¹¶ç¿»è¯‘ã€‘é€‰æ‹©è§†é¢‘æ–‡ä»¶ï¼Œé€‰æ‹©è§†é¢‘æºè¯­è¨€ï¼Œè®¾ç½®æƒ³ç¿»è¯‘åˆ°çš„ç›®æ ‡è¯­è¨€ï¼Œåˆ™ä»ã€è§†é¢‘è¯­éŸ³ä¸­è¯†åˆ«å‡ºæ–‡å­—ã€‘å¹¶ç¿»è¯‘ä¸ºç›®æ ‡è¯­è¨€ï¼Œç„¶åå¯¼å‡ºåŒè¯­å­—å¹•æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€å­—å¹•å’Œè§†é¢‘åˆå¹¶ã€‘é€‰æ‹©è§†é¢‘ï¼Œç„¶åå°†å·²æœ‰çš„å­—å¹•æ–‡ä»¶æ‹–æ‹½åˆ°å³ä¾§å­—å¹•åŒºï¼Œå°†æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€éƒ½è®¾ä¸ºå­—å¹•æ‰€ç”¨è¯­è¨€ã€ç„¶åé€‰æ‹©é…éŸ³ç±»å‹å’Œè§’è‰²ï¼Œå¼€å§‹æ‰§è¡Œ

ã€ä¸ºå­—å¹•åˆ›å»ºé…éŸ³ã€‘å°†æœ¬åœ°çš„å­—å¹•æ–‡ä»¶æ‹–æ‹½åˆ°å³ä¾§å­—å¹•ç¼–è¾‘å™¨ï¼Œç„¶åé€‰æ‹©ç›®æ ‡è¯­è¨€ã€é…éŸ³ç±»å‹å’Œè§’è‰²ï¼Œå°†ç”Ÿæˆé…éŸ³åçš„éŸ³é¢‘æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€éŸ³è§†é¢‘è¯†åˆ«æ–‡å­—ã€‘å°†è§†é¢‘æˆ–éŸ³é¢‘æ‹–æ‹½åˆ°è¯†åˆ«çª—å£ï¼Œå°†è¯†åˆ«å‡ºæ–‡å­—å¹¶å¯¼å‡ºä¸ºsrtå­—å¹•æ ¼å¼

ã€å°†æ–‡å­—åˆæˆè¯­éŸ³ã€‘å°†ä¸€æ®µæ–‡å­—æˆ–è€…å­—å¹•ï¼Œä½¿ç”¨æŒ‡å®šçš„é…éŸ³è§’è‰²ç”Ÿæˆé…éŸ³

ã€ä»è§†é¢‘åˆ†ç¦»éŸ³é¢‘ã€‘å°†è§†é¢‘æ–‡ä»¶åˆ†ç¦»ä¸ºéŸ³é¢‘æ–‡ä»¶å’Œæ— å£°è§†é¢‘

ã€éŸ³è§†é¢‘å­—å¹•åˆå¹¶ã€‘éŸ³é¢‘æ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ã€å­—å¹•æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªè§†é¢‘æ–‡ä»¶

ã€éŸ³è§†é¢‘æ ¼å¼è½¬æ¢ã€‘å„ç§æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢

ã€æ–‡å­—å­—å¹•ç¿»è¯‘ã€‘å°†æ–‡å­—æˆ–srtå­—å¹•æ–‡ä»¶ç¿»è¯‘ä¸ºå…¶ä»–è¯­è¨€

ã€äººå£°èƒŒæ™¯ä¹åˆ†ç¦»ã€‘å°†è§†é¢‘ä¸­çš„äººå£°å’ŒèƒŒæ™¯éŸ³ä¹åˆ†åˆ«åˆ†ç¦»å‡ºæ¥ï¼Œç”Ÿæˆ2ä¸ªéŸ³é¢‘æ–‡ä»¶

ã€ä¸‹è½½æ²¹ç®¡è§†é¢‘ã€‘å¯ä»youtubeä¸Šä¸‹è½½è§†é¢‘

----



https://github.com/jianchang512/pyvideotrans/assets/3378335/3811217a-26c8-4084-ba24-7a95d2e13d58




# ä¸‹è½½windownsé¢„ç¼–è¯‘exeç‰ˆæœ¬(ä»…win10/win11å¯ç”¨ï¼ŒMacå’ŒLinuxç³»ç»Ÿä½¿ç”¨æºç éƒ¨ç½²)

0. [ç‚¹å‡»å»ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆ,è§£å‹ååŒå‡»sp.exe](https://github.com/jianchang512/pyvideotrans/releases)

1. è§£å‹åˆ°è‹±æ–‡è·¯å¾„ä¸‹ï¼Œå¹¶ä¸”è·¯å¾„ä¸­ä¸å«æœ‰ç©ºæ ¼ã€‚è§£å‹ååŒå‡» sp.exe (è‹¥é‡åˆ°æƒé™é—®é¢˜å¯å³é”®ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€)

3. æœªåšå…æ€ï¼Œæ€è½¯å¯èƒ½è¯¯æŠ¥ï¼Œå¯å¿½ç•¥æˆ–ä½¿ç”¨æºç éƒ¨ç½²

4. æ³¨æ„ï¼šå¿…é¡»è§£å‹åä½¿ç”¨ï¼Œä¸å¯ç›´æ¥å‹ç¼©åŒ…å†…åŒå‡»ä½¿ç”¨ï¼Œä¹Ÿä¸å¯è§£å‹åç§»åŠ¨sp.exeæ–‡ä»¶åˆ°å…¶ä»–ä½ç½®

5. [Bç«™è§†é¢‘æ•™ç¨‹](https://www.bilibili.com/video/BV1Gr421s7cN/)



# æºç éƒ¨ç½²/MacOSå’ŒLinuxç³»ç»Ÿåªå¯æºç éƒ¨ç½²

1. å®‰è£…å¥½ python 3.10 ç¯å¢ƒï¼Œå®‰è£…å¥½ git
2. æ‰¾ä¸ªä¸å«ç©ºæ ¼å’Œä¸­æ–‡çš„æ–‡ä»¶å¤¹ï¼ŒLinuxå’ŒMacä¸‹ä»ç»ˆç«¯æ‰“å¼€è¯¥æ–‡ä»¶å¤¹ã€‚Windowä¸‹åœ°å€æ ä¸­è¾“å…¥ `cmd`å›è½¦ã€‚
3. ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ `git clone https://github.com/jianchang512/pyvideotrans`
4. ç»§ç»­æ‰§è¡Œå‘½ä»¤ `cd pyvideotrans`
5. ç»§ç»­æ‰§è¡Œ `python -m venv venv`ï¼Œå¦‚æœä½ çš„ python æŒ‡å‘çš„ä¸è¡Œ python3ï¼Œéœ€è¦æ”¹æˆ `python3 -m venv venv`,ä¸‹åŒ
6. Linuxå’ŒMacç»§ç»­æ‰§è¡Œå‘½ä»¤ `source ./venv/bin/activate`ï¼ŒWindowæ‰§è¡Œå‘½ä»¤ `.\venv\scripts\activate`
7. Linuxä¸‹å¦‚æœè¦ä½¿ç”¨CUDAåŠ é€Ÿï¼Œæ‰§è¡Œ `pip install -r requirements-linux-gpu.txt --no-deps`,å¦‚æœä¸éœ€è¦CUDAåŠ é€Ÿï¼Œæ‰§è¡Œ `pip install -r requirements-cpu-or-mac.txt --no-deps`
8. Macæ‰§è¡Œ `pip install -r requirements-cpu-or-mac.txt --no-deps`
9. Windowä¸‹å¦‚æœè¦ä½¿ç”¨CUDAåŠ é€Ÿï¼Œæ‰§è¡Œ `pip install -r requirements-win-gpu.txt --no-deps`,å¦‚æœä¸éœ€è¦CUDAåŠ é€Ÿï¼Œæ‰§è¡Œ `pip install -r requirements-cpu-or-mac.txt --no-deps`

10. windows å’Œ linux å¦‚æœè¦å¯ç”¨cudaåŠ é€Ÿï¼Œå¿…é¡»æœ‰è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼Œå¹¶ä¸”é…ç½®å¥½äº†CUDA11.8+ç¯å¢ƒï¼Œå…·ä½“å®‰è£…è§ [CUDAåŠ é€Ÿæ”¯æŒ](https://github.com/jianchang512/pyvideotrans?tab=readme-ov-file#cuda-%E5%8A%A0%E9%80%9F%E6%94%AF%E6%8C%81)

11. Linux å¦‚æœè¦ä½¿ç”¨ CUDA åŠ é€Ÿï¼Œè¿˜éœ€è¦é¢å¤–æ‰§è¡Œå®‰è£… `pip install nvidia-cublas-cu11 nvidia-cudnn-cu11`

12. winä¸‹è§£å‹ ffmpeg.zip åˆ°æ ¹ç›®å½•ä¸‹ (ffmpeg.exeæ–‡ä»¶)ï¼ŒLinuxå’ŒMac è¯·è‡ªè¡Œå®‰è£… ffmpegï¼Œå…·ä½“æ–¹æ³•å¯æœç´¢ â€œMacOS å®‰è£… ffmpegâ€ æˆ– â€œLinux å®‰è£…ffmpegâ€

13. `python sp.py` æ‰“å¼€è½¯ä»¶ç•Œé¢

14. Ubuntu ä¸‹å¯èƒ½è¿˜éœ€è¦å®‰è£… Libxcb åº“ï¼Œå®‰è£…å‘½ä»¤

	```	
	sudo apt-get update
	sudo apt-get install libxcb-cursor0	
	```

15. Macä¸‹å¯èƒ½éœ€è¦æ‰§è¡Œ `brew install libsndfile` å®‰è£…libsndfile



# ä½¿ç”¨æ–¹æ³•

1. é€‰æ‹©è§†é¢‘ï¼šç‚¹å‡»é€‰æ‹©mp4/avi/mov/mkv/mpegè§†é¢‘,å¯é€‰æ‹©å¤šä¸ªè§†é¢‘ï¼›

2. ä¿å­˜åˆ°..ï¼šå¦‚æœä¸é€‰æ‹©ï¼Œåˆ™é»˜è®¤ç”Ÿæˆåœ¨åŒç›®å½•ä¸‹çš„ `_video_out`ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•ä¸‹çš„srtæ–‡ä»¶å¤¹ä¸­å°†åˆ›å»ºåŸè¯­è¨€å’Œç›®æ ‡è¯­è¨€çš„ä¸¤ç§å­—å¹•æ–‡ä»¶

3. ç¿»è¯‘æ¸ é“ï¼šå¯é€‰ microsoft|google|baidu|tencent|chatGPT|Azure|Gemini|DeepL|DeepLX|OTT ç¿»è¯‘æ¸ é“

4. ä»£ç†åœ°å€ï¼šå¦‚æœä½ æ‰€åœ¨åœ°åŒºæ— æ³•ç›´æ¥è®¿é—® google/chatGPTï¼Œéœ€è¦åœ¨è½¯ä»¶ç•Œé¢ ç½‘ç»œä»£ç† ä¸­è®¾ç½®ä»£ç†ï¼Œæ¯”å¦‚è‹¥ä½¿ç”¨ v2ray ï¼Œåˆ™å¡«å†™ `http://127.0.0.1:10809`,è‹¥clashï¼Œåˆ™å¡«å†™ `http://127.0.0.1:7890`. å¦‚æœä½ ä¿®æ”¹äº†é»˜è®¤ç«¯å£æˆ–ä½¿ç”¨çš„å…¶ä»–ä»£ç†è½¯ä»¶ï¼Œåˆ™æŒ‰éœ€å¡«å†™

5. åŸå§‹è¯­è¨€ï¼šé€‰æ‹©å¾…ç¿»è¯‘è§†é¢‘é‡Œçš„è¯­è¨€ç§ç±»

6. ç›®æ ‡è¯­è¨€ï¼šé€‰æ‹©å¸Œæœ›ç¿»è¯‘åˆ°çš„è¯­è¨€ç§ç±»

7. TTSå’Œé…éŸ³è§’è‰²ï¼šé€‰æ‹©ç¿»è¯‘ç›®æ ‡è¯­è¨€åï¼Œå¯ä»é…éŸ³é€‰é¡¹ä¸­ï¼Œé€‰æ‹©é…éŸ³è§’è‰²ï¼›
   
   ç¡¬å­—å¹•: 
   æ˜¯æŒ‡å§‹ç»ˆæ˜¾ç¤ºå­—å¹•ï¼Œä¸å¯éšè—ï¼Œå¦‚æœå¸Œæœ›ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¹Ÿæœ‰å­—å¹•ï¼Œè¯·é€‰æ‹©ç¡¬å­—å¹•åµŒå…¥ï¼Œç¡¬å­—å¹•æ—¶å¯é€šè¿‡videotrans/set.ini ä¸­ fontsizeè®¾ç½®å­—ä½“å¤§å°

   ç¡¬å­—å¹•(åŒ):
   å°†ä¸Šä¸‹ä¸¤æ’åˆ†åˆ«æ˜¾ç¤ºç›®æ ‡è¯­è¨€å­—å¹•å’ŒåŸå§‹è¯­è¨€å­—å¹•

   è½¯å­—å¹•: 
   å¦‚æœæ’­æ”¾å™¨æ”¯æŒå­—å¹•ç®¡ç†ï¼Œå¯æ˜¾ç¤ºæˆ–è€…éšè—å­—å¹•ï¼Œè¯¥æ–¹å¼ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¸ä¼šæ˜¾ç¤ºå­—å¹•ï¼ŒæŸäº›å›½äº§æ’­æ”¾å™¨å¯èƒ½ä¸æ”¯æŒ,éœ€è¦å°†ç”Ÿæˆçš„è§†é¢‘åŒåsrtæ–‡ä»¶å’Œè§†é¢‘æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹æ‰ä¼šæ˜¾ç¤º

   è½¯å­—å¹•(åŒ):
   å°†åµŒå…¥2ç§è¯­è¨€çš„å­—å¹•ï¼Œå¯é€šè¿‡æ’­æ”¾å™¨çš„å­—å¹•æ˜¾ç¤º/éšè—åŠŸèƒ½æ¥åˆ‡æ¢ä¸åŒè¯­è¨€å­—å¹•


8. è¯­éŸ³è¯†åˆ«æ¨¡å‹: é€‰æ‹© base/small/medium/large-v2/large-v3, è¯†åˆ«æ•ˆæœè¶Šæ¥è¶Šå¥½ï¼Œä½†è¯†åˆ«é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œæ‰€éœ€å†…å­˜è¶Šæ¥è¶Šå¤§ï¼Œå†…ç½®baseæ¨¡å‹ï¼Œå…¶ä»–æ¨¡å‹è¯·å•ç‹¬ä¸‹è½½åï¼Œè§£å‹æ”¾åˆ° `å½“å‰è½¯ä»¶ç›®å½•/models`ç›®å½•ä¸‹.å¦‚æœGPUæ˜¾å­˜ä½äº4Gï¼Œä¸è¦ä½¿ç”¨ large-v3

   æ•´ä½“è¯†åˆ«:ç”±æ¨¡å‹è‡ªåŠ¨å¯¹æ•´ä¸ªéŸ³é¢‘æ–­å¥å¤„ç†,å¤šå¤§çš„è§†é¢‘è¯·å‹¿é€‰æ‹©æ•´ä½“è¯†åˆ«ï¼Œé¿å…æ˜¾å­˜ä¸è¶³é—ªé€€

   é¢„å…ˆåˆ†å‰²:é€‚åˆå¾ˆå¤§çš„è§†é¢‘ï¼Œäº‹å…ˆåˆ‡æˆ1åˆ†é’Ÿçš„å°ç‰‡æ®µé€æ¬¡è¯†åˆ«å’Œæ–­å¥

   å‡ç­‰åˆ†å‰²:æŒ‰ç…§å›ºå®šç§’æ•°å‡ç­‰åˆ‡å‰²ï¼Œæ¯æ¡å­—å¹•æ—¶é•¿ç›¸ç­‰ï¼Œæ—¶é•¿ç”±set.iniä¸­interval_splitæ§åˆ¶

    [å…¨éƒ¨æ¨¡å‹ä¸‹è½½åœ°å€](https://github.com/jianchang512/stt/releases/tag/0.0)

    **ç‰¹åˆ«æ³¨æ„**

    fasteræ¨¡å‹ï¼šå¦‚æœä¸‹è½½çš„æ˜¯fasteræ¨¡å‹ï¼Œä¸‹è½½åè§£å‹ï¼Œå°†å‹ç¼©åŒ…å†…çš„"models--Systran--faster-whisper-xx"æ–‡ä»¶å¤¹å¤åˆ¶åˆ°modelsç›®å½•å†…ï¼Œè§£å‹å¤åˆ¶å models ç›®å½•ä¸‹æ–‡ä»¶å¤¹åˆ—è¡¨å¦‚ä¸‹
    ![](https://github.com/jianchang512/stt/assets/3378335/5c972f7b-b0bf-4732-a6f1-253f42c45087)

    openaiæ¨¡å‹ï¼šå¦‚æœä¸‹è½½çš„æ˜¯openaiæ¨¡å‹ï¼Œä¸‹è½½åç›´æ¥å°†é‡Œé¢çš„ .pt æ–‡ä»¶å¤åˆ¶åˆ° modelsæ–‡ä»¶å¤¹ä¸‹å³å¯ã€‚


9. é…éŸ³è¯­é€Ÿï¼šå¡«å†™ -90åˆ°+90 ä¹‹é—´çš„æ•°å­—ï¼ŒåŒæ ·ä¸€å¥è¯åœ¨ä¸åŒè¯­è¨€è¯­éŸ³ä¸‹ï¼Œæ‰€éœ€æ—¶é—´æ˜¯ä¸åŒçš„ï¼Œå› æ­¤é…éŸ³åå¯èƒ½å£°ç”»å­—å¹•ä¸åŒæ­¥ï¼Œå¯ä»¥è°ƒæ•´æ­¤å¤„è¯­é€Ÿï¼Œè´Ÿæ•°ä»£è¡¨é™é€Ÿï¼Œæ­£æ•°ä»£è¡¨åŠ é€Ÿæ’­æ”¾ã€‚

10. å£°éŸ³ã€ç”»é¢ã€å­—å¹•å¯¹é½:  â€œé…éŸ³è¯­é€Ÿâ€ â€œé…éŸ³è‡ªåŠ¨åŠ é€Ÿâ€ â€œè§†é¢‘è‡ªåŠ¨é™é€Ÿâ€ â€œè¯­éŸ³å‰åå»¶å±•â€

>
> ç¿»è¯‘åä¸åŒè¯­è¨€ä¸‹å‘éŸ³æ—¶é•¿ä¸åŒï¼Œæ¯”å¦‚ä¸­æ–‡3sï¼Œç¿»è¯‘ä¸ºè‹±æ–‡å¯èƒ½5sï¼Œå¯¼è‡´æ—¶é•¿å’Œè§†é¢‘ä¸ä¸€è‡´ã€‚
>
> 4ç§è§£å†³æ–¹å¼:
>
> 1. è®¾ç½®é…éŸ³è¯­é€Ÿï¼Œå…¨å±€åŠ é€Ÿ(æŸäº›TTSä¸æ”¯æŒ)
>
> 2. å¼ºåˆ¶é…éŸ³åŠ é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿ç¼©çŸ­é…éŸ³æ—¶é•¿å’Œè§†é¢‘å¯¹é½
>
> 3. å¼ºåˆ¶è§†é¢‘æ…¢é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿å»¶é•¿è§†é¢‘æ—¶é•¿å’Œé…éŸ³å¯¹é½ã€‚
>
> 4. å¦‚æœå‰åæœ‰é™éŸ³ç‰‡æ®µï¼Œåˆ™å‰åå»¶å±•å æ®é™éŸ³åŒº\nå®é™…ä½¿ç”¨ä¸­ï¼Œç»“åˆæ­¤4é¡¹æ•ˆæœæœ€ä½³
>
> å®ç°åŸç†è¯·æŸ¥çœ‹åšæ–‡ https://juejin.cn/post/7343691521601290240
>

12. **CUDAåŠ é€Ÿ**ï¼šç¡®è®¤ä½ çš„ç”µè„‘æ˜¾å¡ä¸º Nå¡ï¼Œå¹¶ä¸”å·²é…ç½®å¥½CUDAç¯å¢ƒå’Œé©±åŠ¨ï¼Œåˆ™å¼€å¯é€‰æ‹©æ­¤é¡¹ï¼Œé€Ÿåº¦èƒ½æå¤§æå‡ï¼Œå…·ä½“é…ç½®æ–¹æ³•è§ä¸‹æ–¹[CUDAåŠ é€Ÿæ”¯æŒ](https://github.com/jianchang512/pyvideotrans?tab=readme-ov-file#cuda-%E5%8A%A0%E9%80%9F%E6%94%AF%E6%8C%81)

13. TTS: å¯ç”¨ edgeTTS å’Œ openai TTS-1æ¨¡å‹ã€Elevenlabsã€clone-voiceã€è‡ªå®šä¹‰TTSï¼Œopenaiéœ€è¦ä½¿ç”¨å®˜æ–¹æ¥å£æˆ–è€…å¼€é€šäº†tts-1æ¨¡å‹çš„ä¸‰æ–¹æ¥å£,ä¹Ÿå¯é€‰æ‹©clone-voiceè¿›è¡ŒåŸéŸ³è‰²é…éŸ³ã€‚åŒæ—¶æ”¯æŒä½¿ç”¨è‡ªå·±çš„ttsæœåŠ¡ï¼Œåœ¨è®¾ç½®èœå•-è‡ªå®šä¹‰TTS-APIä¸­å¡«å†™apiåœ°å€

14. ç‚¹å‡» å¼€å§‹æŒ‰é’® åº•éƒ¨ä¼šæ˜¾ç¤ºå½“å‰è¿›åº¦å’Œæ—¥å¿—ï¼Œå³ä¾§æ–‡æœ¬æ¡†å†…æ˜¾ç¤ºå­—å¹•

15. å­—å¹•è§£æå®Œæˆåï¼Œå°†æš‚åœç­‰å¾…ä¿®æ”¹å­—å¹•ï¼Œå¦‚æœä¸åšä»»ä½•æ“ä½œï¼Œ30såå°†è‡ªåŠ¨ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ä¹Ÿå¯ä»¥åœ¨å³ä¾§å­—å¹•åŒºç¼–è¾‘å­—å¹•ï¼Œç„¶åæ‰‹åŠ¨ç‚¹å‡»ç»§ç»­åˆæˆ

16. å°†åœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸­è§†é¢‘åŒåçš„å­ç›®å½•å†…ï¼Œåˆ†åˆ«ç”Ÿæˆä¸¤ç§è¯­è¨€çš„å­—å¹•srtæ–‡ä»¶ã€åŸå§‹è¯­éŸ³å’Œé…éŸ³åçš„wavæ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿è¿›ä¸€æ­¥å¤„ç†.

17. è®¾ç½®è¡Œè§’è‰²ï¼šå¯å¯¹å­—å¹•ä¸­çš„æ¯è¡Œè®¾å®šå‘éŸ³è§’è‰²ï¼Œé¦–å…ˆå·¦ä¾§é€‰å¥½TTSç±»å‹å’Œè§’è‰²ï¼Œç„¶åç‚¹å‡»å­—å¹•åŒºå³ä¸‹æ–¹â€œè®¾ç½®è¡Œè§’è‰²â€ï¼Œåœ¨æ¯ä¸ªè§’è‰²ååé¢æ–‡æœ¬ä¸­ä¸­ï¼Œå¡«å†™è¦ä½¿ç”¨è¯¥è§’è‰²é…éŸ³çš„è¡Œç¼–å·ï¼Œå¦‚ä¸‹å›¾ï¼š
    ![](./images/p2.png)

18. ä¿ç•™èƒŒæ™¯éŸ³ï¼šå¦‚æœé€‰æ‹©è¯¥é¡¹ï¼Œåˆ™ä¼šå…ˆå°†è§†é¢‘ä¸­çš„äººå£°å’ŒèƒŒæ™¯ä¼´å¥åˆ†ç¦»å‡ºæ¥ï¼Œå…¶ä¸­èƒŒæ™¯ä¼´å¥æœ€ç»ˆå†å’Œé…éŸ³éŸ³é¢‘åˆå¹¶ï¼Œæœ€åç”Ÿæˆçš„ç»“æœè§†é¢‘ä¸­å°†ä¿ç•™èƒŒæ™¯ä¼´å¥ã€‚**æ³¨æ„**:è¯¥åŠŸèƒ½åŸºäºuvr5å®ç°ï¼Œå¦‚æœä½ æ²¡æœ‰è¶³å¤Ÿçš„Nå¡GPUæ˜¾å­˜ï¼Œæ¯”å¦‚8Gä»¥ä¸Šï¼Œå»ºè®®æ…é‡é€‰æ‹©ï¼Œå¯èƒ½éå¸¸æ…¢å¹¶éå¸¸æ¶ˆè€—èµ„æºã€‚å¦‚æœè§†é¢‘æ¯”è¾ƒå¤§ï¼Œ å»ºè®®é€‰æ‹©å•ç‹¬çš„è§†é¢‘åˆ†ç¦»å·¥å…·ï¼Œæ¯”å¦‚ uvr5 æˆ– vocal-separate https://juejin.cn/post/7341617163353341986

19. åŸéŸ³è‰²å…‹éš†é…éŸ³clone-voiceï¼šé¦–å…ˆå®‰è£…éƒ¨ç½²[clone-voice](https://github.com/jianchang512/clone-voice)é¡¹ç›®ï¼Œ ä¸‹è½½é…ç½®å¥½â€œæ–‡å­—->å£°éŸ³â€æ¨¡å‹ï¼Œç„¶ååœ¨æœ¬è½¯ä»¶ä¸­TTSç±»å‹ä¸­é€‰æ‹©â€œclone-voiceâ€,é…éŸ³è§’è‰²é€‰æ‹©â€œcloneâ€ï¼Œå³å¯å®ç°ä½¿ç”¨åŸå§‹è§†é¢‘ä¸­çš„å£°éŸ³è¿›è¡Œé…éŸ³ã€‚ä½¿ç”¨æ­¤æ–¹å¼æ—¶ï¼Œä¸ºä¿è¯æ•ˆæœï¼Œå»ºè®®é€‰æ‹©â€œä¿ç•™èƒŒæ™¯éŸ³â€ï¼Œä»¥å‰”é™¤èƒŒæ™¯å™ªå£°ã€‚

20. ä½¿ç”¨GPT-SoVITSé…éŸ³ï¼šé¦–å…ˆå®‰è£…éƒ¨ç½²å¥½GPT-SoVITSé¡¹ç›®ï¼Œç„¶åå¯åŠ¨ GPT-SoVITSçš„api.pyï¼Œåœ¨è§†é¢‘ç¿»è¯‘é…éŸ³è½¯ä»¶-è®¾ç½®èœå•-GPT-SoVITS API ä¸­å¡«å†™æ¥å£åœ°å€ã€å‚è€ƒéŸ³é¢‘ç­‰ã€‚

GPT-SoVITS è‡ªå¸¦çš„ api.py ä¸æ”¯æŒä¸­è‹±æ··åˆå‘éŸ³ï¼Œè‹¥éœ€æ”¯æŒï¼Œè¯· [ç‚¹å‡»å»ä¸‹è½½è¯¥æ–‡ä»¶](https://github.com/jianchang512/gptsovits-api/releases/tag/v0.1) ï¼Œå°†è¯¥å‹ç¼©åŒ…å†…çš„ api2.py å¤åˆ¶åˆ° GPT-SoVITS æ ¹ç›®å½•ä¸‹ï¼Œå¯åŠ¨æ–¹æ³•ä¸è‡ªå¸¦çš„api.pyä¸€æ ·ï¼Œå¯å‚è€ƒä½¿ç”¨æ•™ç¨‹ https://juejin.cn/post/7343138052973297702


21. åœ¨ `videotrans/chatgpt.txt` `videotrans/azure.txt` `videotrans/gemini.txt` æ–‡ä»¶ä¸­ï¼Œå¯åˆ†åˆ«ä¿®æ”¹ chatGPTã€AzureGPTã€Gemini Pro çš„æç¤ºè¯ï¼Œå¿…é¡»æ³¨æ„é‡Œé¢çš„ `{lang}` ä»£è¡¨ç¿»è¯‘åˆ°çš„ç›®æ ‡è¯­è¨€ï¼Œä¸è¦åˆ é™¤ä¸è¦ä¿®æ”¹ã€‚æç¤ºè¯éœ€è¦ä¿è¯å‘ŠçŸ¥AIå°†æŒ‰è¡Œå‘ç»™å®ƒçš„å†…å®¹ç¿»è¯‘åæŒ‰è¡Œè¿”å›ï¼Œè¿”å›çš„è¡Œæ•°éœ€è¦åŒå‘ç»™å®ƒçš„è¡Œæ•°ä¸€è‡´ã€‚

22.  æ·»åŠ èƒŒæ™¯éŸ³ä¹ï¼šè¯¥åŠŸèƒ½å’Œâ€œä¿ç•™èƒŒæ™¯éŸ³â€ç±»ä¼¼ï¼Œä½†å®ç°æ–¹å¼ä¸åŒï¼Œåªå¯åœ¨â€œæ ‡å‡†åŠŸèƒ½æ¨¡å¼â€å’Œâ€œå­—å¹•åˆ›å»ºé…éŸ³â€æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚
â€œæ·»åŠ èƒŒæ™¯éŸ³ä¹â€æ˜¯é¢„å…ˆä»æœ¬åœ°è®¡ç®—æœºä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºèƒŒæ™¯å£°éŸ³çš„éŸ³é¢‘æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„æ˜¾ç¤ºåœ¨å³ä¾§æ–‡æœ¬æ¡†ä¸­ï¼Œåœ¨å¤„ç†ç»“æŸè¾“å‡ºç»“æœè§†é¢‘æ—¶ï¼Œå°†è¯¥éŸ³é¢‘æ··å…¥ï¼Œæœ€ç»ˆç”Ÿæˆçš„è§†é¢‘é‡Œä¼šæ’­æ”¾è¯¥èƒŒæ™¯éŸ³é¢‘æ–‡ä»¶ã€‚

å¦‚æœåŒæ—¶ä¹Ÿé€‰ä¸­äº†â€œä¿ç•™èƒŒæ™¯éŸ³â€ï¼Œé‚£ä¹ˆåŸå§‹è§†é¢‘é‡Œçš„èƒŒæ™¯éŸ³ä¹Ÿä¼šä¿ç•™ã€‚

æ·»åŠ èƒŒæ™¯éŸ³ä¹åï¼Œå¦‚æœåˆä¸æƒ³è¦äº†ï¼Œç›´æ¥åœ¨å³ä¾§æ–‡æœ¬æ¡†ä¸­åˆ æ‰æ˜¾ç¤ºçš„å†…å®¹å³å¯ã€‚



# å¸¸è§é—®é¢˜

1. ä½¿ç”¨googleç¿»è¯‘æˆ–è€…chatGPTï¼Œæç¤ºå‡ºé”™

   å›½å†…ä½¿ç”¨googleæˆ–chatGPTå®˜æ–¹æ¥å£ï¼Œéƒ½éœ€è¦æŒ‚æ¢¯å­

2. å·²ä½¿ç”¨äº†å…¨å±€ä»£ç†ï¼Œä½†çœ‹èµ·æ¥å¹¶æ²¡æœ‰èµ°ä»£ç†

   éœ€è¦åœ¨è½¯ä»¶ç•Œé¢â€œç½‘ç»œä»£ç†â€ä¸­è®¾ç½®å…·ä½“çš„ä»£ç†åœ°å€ï¼Œæ ¼å¼ä¸º http://127.0.0.1:ç«¯å£å·

3. æç¤º FFmepg ä¸å­˜åœ¨

   é¦–å…ˆæŸ¥çœ‹ç¡®å®šè½¯ä»¶æ ¹ç›®å½•ä¸‹å­˜åœ¨ ffmpeg.exe, ffprobe.exe æ–‡ä»¶æˆ–æ˜¯å¦å­˜åœ¨ffmpegç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè§£å‹ ffmpeg.7zï¼Œå°†è¿™2ä¸ªæ–‡ä»¶æ”¾åˆ°è½¯ä»¶æ ¹ç›®å½•ä¸‹

4. windowsä¸Šå¼€å¯äº† CUDAï¼Œä½†æ˜¯æç¤ºé”™è¯¯

   A: [é¦–å…ˆæŸ¥çœ‹è¯¦ç»†å®‰è£…æ–¹æ³•](https://juejin.cn/post/7318704408727519270)ï¼Œç¡®å®šä½ å·²æ­£ç¡®å®‰è£…äº†cudaç›¸å…³å·¥å…·ï¼Œå¦‚æœä»å­˜åœ¨é”™è¯¯ï¼Œ[ç‚¹å‡»ä¸‹è½½ cuBLAS](https://github.com/jianchang512/stt/releases/download/0.0/cuBLAS_win.7z)ï¼Œè§£å‹åå°†é‡Œé¢çš„dllæ–‡ä»¶å¤åˆ¶åˆ° C:/Windows/System32ä¸‹

   B: è‹¥ç¡®å®šå’ŒAæ— å…³ï¼Œé‚£ä¹ˆè¯·æ£€æŸ¥è§†é¢‘æ˜¯å¦æ˜¯H264ç¼–ç çš„mp4ï¼Œæœ‰äº›é«˜æ¸…è§†é¢‘æ˜¯ H265 ç¼–ç çš„ï¼Œè¿™ç§ä¸æ”¯æŒï¼Œå¯å°è¯•åœ¨â€œè§†é¢‘å·¥å…·ç®±â€ä¸­è½¬ä¸ºH264è§†é¢‘

   C: GPUä¸‹å¯¹è§†é¢‘è¿›è¡Œç¡¬ä»¶è§£ç ç¼–ç å¯¹æ•°æ®æ­£ç¡®æ€§è¦æ±‚ä¸¥æ ¼ï¼Œå®¹é”™ç‡å‡ ä¹ä¸º0ï¼Œä»»ä½•ä¸€ç‚¹é”™è¯¯éƒ½ä¼šå¯¼è‡´å¤±è´¥ï¼ŒåŠ ä¸Šæ˜¾å¡å‹å·ã€é©±åŠ¨ç‰ˆæœ¬ã€CUDAç‰ˆæœ¬ã€ffmpegç‰ˆæœ¬ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ç­‰ï¼Œå¯¼è‡´å¾ˆå®¹æ˜“å‡ºç°å…¼å®¹æ€§é”™è¯¯ã€‚ç›®å‰åŠ äº†å›é€€ï¼ŒGPUä¸Šå¤±è´¥åè‡ªåŠ¨ä½¿ç”¨CPUè½¯ä»¶ç¼–è§£ç ã€‚å¤±è´¥æ—¶logsç›®å½•ä¸‹æ—¥å¿—é‡Œä¼šè®°å½•å‡ºé”™ä¿¡æ¯ã€‚

5. æç¤ºæ¨¡å‹ä¸å­˜åœ¨?

    [å…¨éƒ¨æ¨¡å‹ä¸‹è½½åœ°å€](https://github.com/jianchang512/stt/releases/tag/0.0)

    **æ¨¡å‹åˆ†ä¸ºä¸¤ç±»ï¼š**

    ä¸€ç±»æ˜¯é€‚ç”¨äºâ€œfasteræ¨¡å‹â€çš„ã€‚

    ä¸‹è½½è§£å‹åï¼Œä¼šçœ‹åˆ°æ–‡ä»¶å¤¹ï¼Œç±»ä¼¼ â€œmodels--Systran--faster-whisper-xxxâ€å½¢å¼çš„ï¼Œxxxä»£è¡¨æ¨¡å‹åï¼Œæ¯”å¦‚ base/small/medium/large-v3ç­‰ï¼Œè§£å‹åç›´æ¥å°†è¯¥æ–‡ä»¶å¤¹å¤åˆ¶åˆ°æ­¤ç›®å½•ä¸‹å³å¯ã€‚

    å¦‚æœæ‰€æœ‰fasteræ¨¡å‹ä¸‹è½½åï¼Œå½“å‰modelsæ–‡ä»¶å¤¹ä¸‹åº”è¯¥èƒ½çœ‹åˆ°è¿™å‡ ä¸ªæ–‡ä»¶å¤¹

    models--Systran--faster-whisper-base
    models--Systran--faster-whisper-small
    models--Systran--faster-whisper-medium
    models--Systran--faster-whisper-large-v2
    models--Systran--faster-whisper-large-v3


    å¦ä¸€ç±»æ˜¯é€‚ç”¨äº"openaiæ¨¡å‹çš„"ï¼Œä¸‹è½½è§£å‹åï¼Œç›´æ¥å°±æ˜¯ xx.pt æ–‡ä»¶ï¼Œæ¯”å¦‚ base.pt/small.pt,/medium.pt/large-v3.pt, ç›´æ¥å°†è¯¥ptæ–‡ä»¶å¤åˆ¶åˆ°æ­¤æ–‡ä»¶å¤¹å†…å³å¯ã€‚

    å¦‚æœæ‰€æœ‰openaiæ¨¡å‹ä¸‹è½½åï¼Œå½“å‰modelsæ–‡ä»¶å¤¹ä¸‹åº”è¯¥èƒ½ç›´æ¥çœ‹åˆ° base.pt, small.pt, medium.pt, large-v1.pt, large-v3.pt

6. æç¤ºç›®å½•ä¸å­˜åœ¨æˆ–æƒé™é”™è¯¯

   åœ¨sp.exeä¸Šå³é”®ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€

7. æç¤ºé”™è¯¯ï¼Œä½†æ²¡æœ‰è¯¦ç»†å‡ºé”™ä¿¡æ¯

   æ‰“å¼€logsç›®å½•ï¼Œæ‰¾åˆ°æœ€æ–°çš„logæ—¥å¿—æ–‡ä»¶ï¼Œæ‹‰åˆ°æœ€åº•éƒ¨ï¼Œå³å¯çœ‹åˆ°æŠ¥é”™ä¿¡æ¯ã€‚

8. large-v3æ¨¡å‹éå¸¸æ…¢

   å¦‚æœä½ æ²¡æœ‰Nå¡GPUï¼Œæˆ–è€…æ²¡æœ‰é…ç½®å¥½CUDAç¯å¢ƒï¼Œæˆ–è€…æ˜¾å­˜ä½äº8Gï¼Œè¯·ä¸è¦ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå¦åˆ™ä¼šéå¸¸æ…¢å’Œå¡é¡¿

9. æç¤ºç¼ºå°‘cublasxx.dllæ–‡ä»¶

   æœ‰æ—¶ä¼šé‡åˆ°â€œcublasxx.dllä¸å­˜åœ¨â€çš„é”™è¯¯ï¼Œæ­¤æ—¶éœ€è¦ä¸‹è½½ cuBLASï¼Œç„¶åå°†dllæ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿç›®å½•ä¸‹

   [ç‚¹å‡»ä¸‹è½½ cuBLAS](https://github.com/jianchang512/stt/releases/download/0.0/cuBLAS_win.7z) ï¼Œè§£å‹åå°†é‡Œé¢çš„dllæ–‡ä»¶å¤åˆ¶åˆ° C:/Windows/System32ä¸‹
   
   [cuBLAS.and.cuDNN_win_v4](https://github.com/Purfview/whisper-standalone-win/releases/download/libs/cuBLAS.and.cuDNN_win_v4.7z)


11. æ€æ ·ä½¿ç”¨è‡ªå®šä¹‰éŸ³è‰²
   
   è®¾ç½®èœå•-è‡ªå®šä¹‰TTS-APIï¼Œå¡«å†™è‡ªå·±çš„ttsæœåŠ¡å™¨æ¥å£åœ°å€ã€‚
   
   å°†ä»¥POSTè¯·æ±‚å‘å¡«å†™çš„APIåœ°å€å‘é€application/www-urlencodeæ•°æ®ï¼š
```
# å‘é€çš„è¯·æ±‚æ•°æ®ï¼š

text:éœ€è¦åˆæˆçš„æ–‡æœ¬/å­—ç¬¦ä¸²

language:æ–‡å­—æ‰€å±è¯­è¨€ä»£ç (zh-cn,zh-tw,en,ja,ko,ru,de,fr,tr,th,vi,ar,hi,hu,es,pt,it)/å­—ç¬¦ä¸²

voice:é…éŸ³è§’è‰²åç§°/å­—ç¬¦ä¸²

rate:åŠ å‡é€Ÿå€¼ï¼Œ0æˆ–è€… '+æ•°å­—%' '-æ•°å­—%'ï¼Œä»£è¡¨åœ¨æ­£å¸¸é€Ÿåº¦åŸºç¡€ä¸Šè¿›è¡ŒåŠ å‡é€Ÿçš„ç™¾åˆ†æ¯”/å­—ç¬¦ä¸²

ostype:win32æˆ–macæˆ–linuxæ“ä½œç³»ç»Ÿç±»å‹/å­—ç¬¦ä¸²

extra:é¢å¤–å‚æ•°/å­—ç¬¦ä¸²


# æœŸå¾…ä»æ¥å£è¿”å›jsonæ ¼å¼æ•°æ®ï¼š
{
    code:0=åˆæˆæˆåŠŸæ—¶ï¼Œ>0çš„æ•°å­—ä»£è¡¨å¤±è´¥
    msg:ok=åˆæˆæˆåŠŸæ—¶ï¼Œå…¶ä»–ä¸ºå¤±è´¥åŸå› 
    data:åœ¨åˆæˆæˆåŠŸæ—¶ï¼Œè¿”å›mp3æ–‡ä»¶çš„å®Œæ•´urlåœ°å€ï¼Œç”¨äºåœ¨è½¯ä»¶å†…ä¸‹è½½ã€‚å¤±è´¥æ—¶ä¸ºç©º
}   


```
   
13. å­—å¹•è¯­éŸ³æ— æ³•å¯¹é½

> ç¿»è¯‘åä¸åŒè¯­è¨€ä¸‹å‘éŸ³æ—¶é•¿ä¸åŒï¼Œæ¯”å¦‚ä¸€å¥è¯ä¸­æ–‡3sï¼Œç¿»è¯‘ä¸ºè‹±æ–‡å¯èƒ½5sï¼Œå¯¼è‡´æ—¶é•¿å’Œè§†é¢‘ä¸ä¸€è‡´ã€‚
> 
> 2ç§è§£å†³æ–¹å¼:
> 
>     1. å¼ºåˆ¶é…éŸ³åŠ é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿ç¼©çŸ­é…éŸ³æ—¶é•¿å’Œè§†é¢‘å¯¹é½
> 
>     2. å¼ºåˆ¶è§†é¢‘æ…¢é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿å»¶é•¿è§†é¢‘æ—¶é•¿å’Œé…éŸ³å¯¹é½ã€‚
> 

14. å­—å¹•ä¸æ˜¾ç¤ºæˆ–æ˜¾ç¤ºä¹±ç 

> 
> é‡‡ç”¨è½¯åˆæˆå­—å¹•ï¼šå­—å¹•ä½œä¸ºå•ç‹¬æ–‡ä»¶åµŒå…¥è§†é¢‘ï¼Œå¯å†æ¬¡æå–å‡ºï¼Œå¦‚æœæ’­æ”¾å™¨æ”¯æŒï¼Œå¯åœ¨æ’­æ”¾å™¨å­—å¹•ç®¡ç†ä¸­å¯ç”¨æˆ–ç¦ç”¨å­—å¹•ï¼›
> 
> æ³¨æ„å¾ˆå¤šå›½å†…æ’­æ”¾å™¨å¿…é¡»å°†srtå­—å¹•æ–‡ä»¶å’Œè§†é¢‘æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ä¸”åå­—ç›¸åŒï¼Œæ‰èƒ½åŠ è½½è½¯å­—å¹•ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦å°†srtæ–‡ä»¶è½¬ä¸ºGBKç¼–ç ï¼Œå¦åˆ™æ˜¾ç¤ºä¹±ç ï¼Œ
> 

15. å¦‚ä½•åˆ‡æ¢è½¯ä»¶ç•Œé¢è¯­è¨€/ä¸­æ–‡orè‹±æ–‡

æ‰“å¼€è½¯ä»¶ç›®å½•ä¸‹ videotrans/set.ini æ–‡ä»¶ï¼Œç„¶åå°† `lang=` åå¡«å†™è¯­è¨€ä»£ç ï¼Œ`zh`ä»£è¡¨ä¸­æ–‡,`en`ä»£è¡¨è‹±æ–‡ï¼Œä¿®æ”¹åé‡å¯è½¯ä»¶

```

;The default interface follows the system and can also be specified manually here, zh=Chinese interface, en=English interface.
;é»˜è®¤ç•Œé¢è·Ÿéšç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥åœ¨æ­¤æ‰‹åŠ¨æŒ‡å®šï¼Œzh=ä¸­æ–‡ç•Œé¢ï¼Œen=è‹±æ–‡ç•Œé¢
lang =


```

16. å°šæœªæ‰§è¡Œå®Œæ¯•å°±é—ªé€€

å¦‚æœå¯ç”¨äº†cudaå¹¶ä¸”ç”µè„‘å·²å®‰è£…å¥½äº†cudaç¯å¢ƒï¼Œä½†æ²¡æœ‰æ‰‹åŠ¨å®‰è£…é…ç½®è¿‡cudnnï¼Œé‚£ä¹ˆä¼šå‡ºç°è¯¥é—®é¢˜ï¼Œå»å®‰è£…å’ŒcudaåŒ¹é…çš„cudnnã€‚æ¯”å¦‚ä½ å®‰è£…äº†cuda12.3ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸‹è½½cudnn for cuda12.xå‹ç¼©åŒ…ï¼Œç„¶åè§£å‹åé‡Œé¢çš„3ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°cudaå®‰è£…ç›®å½•ä¸‹ã€‚å…·ä½“æ•™ç¨‹å‚è€ƒ 
https://juejin.cn/post/7318704408727519270


å¦‚æœcudnnæŒ‰ç…§æ•™ç¨‹å®‰è£…å¥½äº†ä»é—ªé€€ï¼Œé‚£ä¹ˆæå¤§æ¦‚ç‡æ˜¯GPUæ˜¾å­˜ä¸è¶³ï¼Œå¯ä»¥æ”¹ä¸ºä½¿ç”¨ mediumæ¨¡å‹ï¼Œæ˜¾å­˜ä¸è¶³8Gæ—¶ï¼Œå°½é‡é¿å…ä½¿ç”¨largev-3æ¨¡å‹ï¼Œå°¤å…¶æ˜¯è§†é¢‘å¤§äº20Mæ—¶ï¼Œå¦åˆ™å¯èƒ½æ˜¾å­˜ä¸è¶³è€Œå´©æºƒ


17. å¦‚ä½•è°ƒèŠ‚å­—å¹•å­—ä½“å¤§å°

å¦‚æœåµŒå…¥ç¡¬å­—å¹•ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ videotrans/set.ini ä¸­çš„ fontsize=0ä¸ºä¸€ä¸ªåˆé€‚çš„å€¼ï¼Œæ¥è°ƒèŠ‚å­—ä½“å¤§å°ã€‚0ä»£è¡¨é»˜è®¤å°ºå¯¸ï¼Œ20ä»£è¡¨å­—ä½“å°ºå¯¸ä¸º20ä¸ªåƒç´ 

18. macosæŠ¥é”™

OSError: ctypes.util.find_library() did not manage to locate a library called 'sndfile'

è§£å†³åŠæ³•ï¼š

æ‰¾åˆ°libsndfileå®‰è£…ä½ç½®ï¼Œé€šè¿‡brewå®‰è£…çš„è¯ä¸€èˆ¬åœ¨ï¼š/opt/homebrew/Cellar/libsndfileï¼Œ
ç„¶åå°†è¯¥è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼šexport DYLD_LIBRARY_PATH=/opt/homebrew/Cellar/libsndfile/1.2.2/lib:$DYLD_LIBRARY_PATH


19. GPT-SoVITS API ä¸æ”¯æŒ ä¸­è‹± æ··åˆå‘éŸ³

GPT-SoVITS è‡ªå¸¦çš„ api.py ä¸æ”¯æŒä¸­è‹±æ··åˆå‘éŸ³ï¼Œè‹¥éœ€æ”¯æŒï¼Œè¯· [ç‚¹å‡»ä¸‹è½½è¯¥æ–‡ä»¶](https://github.com/jianchang512/stt/releases/download/0.0/GPT-SoVITS.api.py.zip) ï¼Œç”¨è¯¥å‹ç¼©åŒ…å†…çš„ api.pyï¼Œè¦†ç›– GPT-SoVITS è‡ªå¸¦çš„api.py

20. æ˜¯å¦æœ‰è¯¦ç»†æ•™ç¨‹

æœ‰æ–‡æ¡£ç½‘ç«™ https://pyvideotrans.com ,ä¸è¿‡è¿™é‡Œä¼ å›¾ä¸ä¾¿ï¼Œå› æ­¤æ›´æ–°è¾ƒæ…¢ï¼Œè¯·æŸ¥çœ‹æ˜é‡‘åšå®¢è·å–æœ€æ–°æ•™ç¨‹ï¼Œ https://juejin.cn/user/4441682704623992/columns

æˆ–å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œå†…å®¹åŸºæœ¬ç­‰åŒæ˜é‡‘åšå®¢ï¼Œå¾®ä¿¡æœä¸€æœæŸ¥çœ‹å…¬ä¼—å· `pyvideotrans`



# é«˜çº§è®¾ç½® videotrans/set.ini


**è¯·å‹¿éšæ„è°ƒæ•´ï¼Œé™¤éä½ çŸ¥é“å°†ä¼šå‘ç”Ÿä»€ä¹ˆ**

```
;####################
;#######################
;å¦‚æœä½ ä¸ç¡®å®šä¿®æ”¹åå°†ä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ï¼Œè¯·å‹¿éšæ„ä¿®æ”¹ï¼Œä¿®æ”¹å‰è¯·åšå¥½å¤‡ä»½ï¼Œ å¦‚æœå‡ºé—®é¢˜è¯·æ¢å¤
;If you are not sure of the impact of the modification, please do not modify it, please make a backup before modification, and restore it if something goes wrong.

;å‡çº§å‰è¯·åšå¥½å¤‡ä»½ï¼Œå‡çº§åæŒ‰ç…§åŸå¤‡ä»½é‡æ–°ä¿®æ”¹ã€‚è¯·å‹¿ç›´æ¥ç”¨å¤‡ä»½æ–‡ä»¶è¦†ç›–ï¼Œå› ä¸ºæ–°ç‰ˆæœ¬å¯èƒ½æœ‰æ–°å¢é…ç½®
;Please make a backup before upgrading, and re-modify according to the original backup after upgrading. Please don't overwrite the backup file directly, because the new version may have added

;The default interface follows the system and can also be specified manually here, zh=Chinese interface, en=English interface.
;é»˜è®¤ç•Œé¢è·Ÿéšç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥åœ¨æ­¤æ‰‹åŠ¨æŒ‡å®šï¼Œzh=ä¸­æ–‡ç•Œé¢ï¼Œen=è‹±æ–‡ç•Œé¢
lang =

;Video processing quality, integer 0-51, 0 = lossless processing with large size is very slow, 51 = lowest quality with smallest size is the fastest processing speed
;è§†é¢‘å¤„ç†è´¨é‡ï¼Œ0-51çš„æ•´æ•°ï¼Œ0=æ— æŸå¤„ç†å°ºå¯¸è¾ƒå¤§é€Ÿåº¦å¾ˆæ…¢ï¼Œ51=è´¨é‡æœ€ä½å°ºå¯¸æœ€å°å¤„ç†é€Ÿåº¦æœ€å¿«
crf=13

;The number of simultaneous voiceovers, 1-10, it is recommended not to be greater than 5, otherwise it is easy to fail
;åŒæ—¶é…éŸ³çš„æ•°é‡ï¼Œ1-10ï¼Œå»ºè®®ä¸è¦å¤§äº5ï¼Œå¦åˆ™å®¹æ˜“å¤±è´¥
dubbing_thread=2

;Maximum audio acceleration, default 0, i.e. no limitation, you need to set a number greater than 1-100, such as 1.5, representing the maximum acceleration of 1.5 times, pay attention to how to set the limit, then the subtitle sound will not be able to be aligned
;éŸ³é¢‘æœ€å¤§åŠ é€Ÿå€æ•°ï¼Œé»˜è®¤0ï¼Œå³ä¸é™åˆ¶ï¼Œéœ€è®¾ç½®å¤§äº1-100çš„æ•°å­—ï¼Œæ¯”å¦‚1.5ï¼Œä»£è¡¨æœ€å¤§åŠ é€Ÿ1.5å€ï¼Œæ³¨æ„å¦‚ä½•è®¾ç½®äº†é™åˆ¶ï¼Œåˆ™å­—å¹•å£°éŸ³å°†æ— æ³•å¯¹é½
audio_rate=2.5

;Maximum permissible slowdown times of the video frequency, default 0, that is, no restriction, you need to set a number greater than 1-20, for example, 1 = on behalf of not slowing down, 20 = down to 1/20 = 0.05 the original speed, pay attention to how to set up the limit, then the subtitles and the screen will not be able to be aligned
;è§†é¢‘é¢‘æœ€å¤§å…è®¸æ…¢é€Ÿå€æ•°ï¼Œé»˜è®¤0ï¼Œå³ä¸é™åˆ¶ï¼Œéœ€è®¾ç½®å¤§äº1-20çš„æ•°å­—ï¼Œæ¯”å¦‚1=ä»£è¡¨ä¸æ…¢é€Ÿï¼Œ20=é™ä¸º1/20=0.05åŸé€Ÿåº¦ï¼Œæ³¨æ„å¦‚ä½•è®¾ç½®äº†é™åˆ¶ï¼Œåˆ™å­—å¹•å’Œç”»é¢å°†æ— æ³•å¯¹é½
video_rate=0

;Number of simultaneous translations, 1-20, not too large, otherwise it may trigger the translation api frequency limitation
;åŒæ—¶ç¿»è¯‘çš„æ•°é‡ï¼Œ1-20ï¼Œä¸è¦å¤ªå¤§ï¼Œå¦åˆ™å¯èƒ½è§¦å‘ç¿»è¯‘apié¢‘ç‡é™åˆ¶
trans_thread=10

;Hard subtitles can be set here when the subtitle font size, fill in the integer numbers, such as 12, on behalf of the font size of 12px, 20 on behalf of the size of 20px, 0 is equal to the default size
;ç¡¬å­—å¹•æ—¶å¯åœ¨è¿™é‡Œè®¾ç½®å­—å¹•å­—ä½“å¤§å°ï¼Œå¡«å†™æ•´æ•°æ•°å­—ï¼Œæ¯”å¦‚12ï¼Œä»£è¡¨å­—ä½“12pxå¤§å°ï¼Œ20ä»£è¡¨20pxå¤§å°ï¼Œ0ç­‰äºé»˜è®¤å¤§å°
fontsize=14


;èƒŒæ™¯å£°éŸ³éŸ³é‡é™ä½æˆ–å‡é«˜å¹…åº¦ï¼Œå¤§äº1å‡é«˜ï¼Œå°äº1é™ä½
backaudio_volume=0.5

;Number of translation error retries
;ç¿»è¯‘å‡ºé”™é‡è¯•æ¬¡æ•°
retries=5

;chatGPT model list
;å¯ä¾›é€‰æ‹©çš„chatGPTæ¨¡å‹ï¼Œä»¥è‹±æ–‡é€—å·åˆ†éš”
chatgpt_model=gpt-3.5-turbo,gpt-4,gpt-4-turbo-preview

;When separating the background sound, cut the clip, too long audio will exhaust the memory, so cut it and separate it, unit s, default 1800s, i.e. half an hour.
;èƒŒæ™¯éŸ³åˆ†ç¦»æ—¶åˆ‡åˆ†ç‰‡æ®µï¼Œå¤ªé•¿çš„éŸ³é¢‘ä¼šè€—å°½æ˜¾å­˜ï¼Œå› æ­¤åˆ‡åˆ†ååˆ†ç¦»ï¼Œå•ä½s,é»˜è®¤ 600s
separate_sec=600

;The number of seconds to pause before subtitle recognition is completed and waiting for translation, and the number of seconds to pause after translation and waiting for dubbing.
;å­—å¹•è¯†åˆ«å®Œæˆç­‰å¾…ç¿»è¯‘å‰çš„æš‚åœç§’æ•°ï¼Œå’Œç¿»è¯‘å®Œç­‰å¾…é…éŸ³çš„æš‚åœç§’æ•°
countdown_sec=30

;Accelerator cuvid or cuda
;ç¡¬ä»¶ç¼–ç è®¾å¤‡ï¼Œcuvidæˆ–cuda
hwaccel=cuvid

; Accelerator output format = cuda or nv12
;ç¡¬ä»¶è¾“å‡ºæ ¼å¼ï¼Œnv12æˆ–cuda
hwaccel_output_format=nv12

;not decode video before use -c:v h264_cuvid,false=use -c:v h264_cuvid, true=dont use
;Whether to disable hardware decoding, true=disable, good compatibility; false=enable, there may be compatibility errors on some hardware.
;æ˜¯å¦ç¦ç”¨ç¡¬ä»¶è§£ç ï¼Œtrue=ç¦ç”¨ï¼Œå…¼å®¹æ€§å¥½ï¼›false=å¯ç”¨ï¼Œå¯èƒ½æŸäº›ç¡¬ä»¶ä¸Šæœ‰å…¼å®¹é”™è¯¯
no_decode=true

;cuda data type when recognizing subtitles from video, int8 = consumes fewer resources, faster, lower precision, float32 = consumes more resources, slower, higher precision, int8_float16 = device of choice
;ä»è§†é¢‘ä¸­è¯†åˆ«å­—å¹•æ—¶çš„cudaæ•°æ®ç±»å‹ï¼Œint8=æ¶ˆè€—èµ„æºå°‘ï¼Œé€Ÿåº¦å¿«ï¼Œç²¾åº¦ä½ï¼Œfloat32=æ¶ˆè€—èµ„æºå¤šï¼Œé€Ÿåº¦æ…¢ï¼Œç²¾åº¦é«˜ï¼Œint8_float16=è®¾å¤‡è‡ªé€‰
cuda_com_type=float32

;ä¸­æ–‡è¯­è¨€çš„è§†é¢‘æ—¶ï¼Œç”¨äºè¯†åˆ«çš„æç¤ºè¯ï¼Œå¯è§£å†³ç®€ä½“è¯†åˆ«ä¸ºç¹ä½“é—®é¢˜ã€‚ä½†æ³¨æ„ï¼Œæœ‰å¯èƒ½ç›´æ¥ä¼šå°†æç¤ºè¯ä½œä¸ºè¯†åˆ«ç»“æœè¿”å›
initial_prompt_zh=

; whisper thread 0 is equal cpu core,
;å­—å¹•è¯†åˆ«æ—¶ï¼Œcpuè¿›ç¨‹
whisper_threads=4

;whisper num_worker
;å­—å¹•è¯†åˆ«æ—¶ï¼ŒåŒæ—¶å·¥ä½œè¿›ç¨‹
whisper_worker=1

;Subtitle recognition accuracy adjustment, 1-5, 1 = consume the lowest resources, 5 = consume the most, if the video memory is sufficient, can be set to 5, may achieve more accurate recognition results
;å­—å¹•è¯†åˆ«æ—¶ç²¾åº¦è°ƒæ•´ï¼Œ1-5ï¼Œ1=æ¶ˆè€—èµ„æºæœ€ä½ï¼Œ5=æ¶ˆè€—æœ€å¤šï¼Œå¦‚æœæ˜¾å­˜å……è¶³ï¼Œå¯ä»¥è®¾ä¸º5ï¼Œå¯èƒ½ä¼šå–å¾—æ›´ç²¾ç¡®çš„è¯†åˆ«ç»“æœ
beam_size=5
best_of=5

;Enable custom mute segmentation when in subtitle overall recognition mode, true=enable, can be set to false to disable when video memory is insufficient.
;å­—å¹•æ•´ä½“è¯†åˆ«æ¨¡å¼æ—¶å¯ç”¨è‡ªå®šä¹‰é™éŸ³åˆ†å‰²ç‰‡æ®µï¼Œtrue=å¯ç”¨ï¼Œæ˜¾å­˜ä¸è¶³æ—¶ï¼Œå¯ä»¥è®¾ä¸ºfalseç¦ç”¨
vad=true

;0 = less GPU resources but slightly worse results, 1 = more GPU resources and better results
;0=å ç”¨æ›´å°‘GPUèµ„æºä½†æ•ˆæœç•¥å·®ï¼Œ1=å ç”¨æ›´å¤šGPUèµ„æºåŒæ—¶æ•ˆæœæ›´å¥½
temperature=1

;Same as temperature, true=better with more GPUs, false=slightly worse with fewer GPUs.
;åŒ temperature, true=å ç”¨æ›´å¤šGPUæ•ˆæœæ›´å¥½ï¼Œfalse=å ç”¨æ›´å°‘GPUæ•ˆæœç•¥å·®
condition_on_previous_text=true

; For pre-split and overall , the minimum silence segment ms to be used as the basis for cutting, default 100ms, i.e., and max seconds.
;ç”¨äº é¢„å…ˆåˆ†å‰² å’Œ æ•´ä½“è¯†åˆ« æ—¶ï¼Œä½œä¸ºåˆ‡å‰²ä¾æ®çš„æœ€å°é™éŸ³ç‰‡æ®µmsï¼Œé»˜è®¤200ms ä»¥åŠæœ€å¤§å¥å­æ—¶é•¿
overall_silence=200
overall_maxsecs=3


; For  equal-division, the minimum silence segment ms to be used as the basis for cutting, default 500ms, i.e., only silence greater than or equal to 500ms will be segmented.
;ç”¨äº   å‡ç­‰åˆ†å‰²æ—¶ï¼Œä½œä¸ºåˆ‡å‰²ä¾æ®çš„æœ€å°é™éŸ³ç‰‡æ®µmsï¼Œé»˜è®¤500msï¼Œå³åªæœ‰å¤§äºç­‰äº500msçš„é™éŸ³å¤„æ‰åˆ†å‰²
voice_silence=500

;Seconds per slice for equal-division, default 10s, i.e. each subtitle is approximately 10s long.
;ç”¨äºå‡ç­‰åˆ†å‰²æ—¶çš„æ¯ä¸ªåˆ‡ç‰‡æ—¶é•¿ ç§’ï¼Œé»˜è®¤ 10s,å³æ¯ä¸ªå­—å¹•æ—¶é•¿å¤§çº¦éƒ½æ˜¯10s
interval_split=10

;CJK subtitle number of characters in a line length, more than this will be line feed.
;ä¸­æ—¥éŸ©å­—å¹•ä¸€è¡Œé•¿åº¦å­—ç¬¦ä¸ªæ•°ï¼Œå¤šäºè¿™ä¸ªå°†æ¢è¡Œ
cjk_len=30

;Other language line breaks, more than this number of characters will be a line break.
;å…¶ä»–è¯­è¨€æ¢è¡Œé•¿åº¦ï¼Œå¤šäºè¿™ä¸ªå­—ç¬¦æ•°é‡å°†æ¢è¡Œ
other_len=60

```




# CUDA åŠ é€Ÿæ”¯æŒ

**å®‰è£…CUDAå·¥å…·** [windowsä¸Šè¯¦ç»†å®‰è£…æ–¹æ³•](https://juejin.cn/post/7318704408727519270)

å¿…é¡» cudaå’Œcudnnéƒ½å®‰è£…å¥½ï¼Œå¦åˆ™å¯èƒ½ä¼šé—ªé€€ã€‚

Linuxä¸Š `pip install nvidia-cublas-cu11 nvidia-cudnn-cu11`


å®‰è£…å®Œæˆåæ‰§è¡Œ `python testcuda.py` æˆ– åŒå‡» testcuda.exe å¦‚æœè¾“å‡ºå‡æ˜¯  ok ,è¯´æ˜å¯ç”¨  

æœ‰æ—¶ä¼šé‡åˆ°â€œcublasxx.dllä¸å­˜åœ¨â€çš„é”™è¯¯, æˆ–è€…æœªé‡åˆ°æ­¤é”™è¯¯ï¼Œå¹¶ä¸”CUDAé…ç½®æ­£ç¡®ï¼Œä½†å§‹ç»ˆå‡ºç°è¯†åˆ«é”™è¯¯ï¼Œéœ€è¦ä¸‹è½½ cuBLASï¼Œç„¶åå°†dllæ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿç›®å½•ä¸‹

[ç‚¹å‡»ä¸‹è½½ cuBLAS](https://github.com/jianchang512/stt/releases/download/0.0/cuBLAS_win.7z)ï¼Œè§£å‹åå°†é‡Œé¢çš„dllæ–‡ä»¶å¤åˆ¶åˆ° C:/Windows/System32ä¸‹




# CLI å‘½ä»¤è¡Œæ¨¡å¼

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/drive/1yDGPWRyXeZ1GWqkOpdJDv4nA_88HNm01?usp=sharing)


cli.py æ˜¯å‘½ä»¤è¡Œæ‰§è¡Œè„šæœ¬ï¼Œ`python cli.py` æ˜¯æœ€ç®€å•çš„æ‰§è¡Œæ–¹å¼

æ¥æ”¶çš„å‚æ•°:

`-m mp4è§†é¢‘çš„ç»å¯¹åœ°å€`

å…·ä½“å„é¡¹é…ç½®å‚æ•°å¯åœ¨ ä½äº cli.py åŒç›®å½•çš„ cli.ini ä¸­é…ç½®ï¼Œå…¶ä»–å¾…å¤„ç†çš„mp4è§†é¢‘åœ°å€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•° `-m mp4è§†é¢‘ç»å¯¹åœ°å€` æ–¹å¼æ¥é…ç½®ï¼Œæ¯”å¦‚ `python cli.py -m D:/1.mp4`.

cli.ini é‡Œæ˜¯å„é¡¹å®Œæ•´å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°`source_mp4`å³ä»£è¡¨å¾…å¤„ç†çš„è§†é¢‘ï¼Œå¦‚æœå‘½ä»¤è¡Œé€šè¿‡ -m ä¼ å‚ï¼Œåˆ™ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼Œå¦åˆ™ä½¿ç”¨æ­¤`source_mp4`.

`-c é…ç½®æ–‡ä»¶åœ°å€`

ä½ ä¹Ÿå¯ä»¥å¤åˆ¶ cli.ini åˆ°å…¶ä»–ä½ç½®åï¼Œé€šè¿‡å‘½ä»¤è¡Œä¸Š `-c cli.iniçš„ç»å¯¹è·¯å¾„åœ°å€` æ¥æŒ‡å®šè¦ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ `python cli.py -c E:/conf/cli.ini`, åˆ™ä¼šä½¿ç”¨è¯¥æ–‡ä»¶é‡Œçš„é…ç½®ä¿¡æ¯ï¼Œè€Œå¿½ç•¥é¡¹ç›®ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚

`-cuda`æ— éœ€åè·Ÿå€¼ï¼Œåªè¦æ·»åŠ å³ä»£è¡¨å¯ç”¨CUDAåŠ é€Ÿ(å¦‚æœå¯ç”¨) `python cli.py -cuda`

ç¤ºä¾‹:`python cli.py -cuda -m D:/1.mp4`


## cli.iniå†…å…·ä½“å‚æ•°å’Œè¯´æ˜



```
;å‘½ä»¤è¡Œå‚æ•°
;å¾…å¤„ç†çš„è§†é¢‘ç»å¯¹åœ°å€ï¼Œæ­£æ–œæ åšè·¯å¾„åˆ†éš”ç¬¦ï¼Œä¹Ÿå¯åœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­ -m åä¼ é€’
source_mp4=
;ç½‘ç»œä»£ç†åœ°å€ï¼Œgoogle  chatGPTå®˜æ–¹chinaå¿…å¡«
proxy=http://127.0.0.1:10809
;è¾“å‡ºç»“æœæ–‡ä»¶åˆ°ç›®å½•
target_dir=
;è§†é¢‘å‘éŸ³è¯­è¨€ï¼Œä»è¿™é‡Œé€‰æ‹© zh-cn zh-tw en fr de ja ko ru es th it pt vi ar tr
source_language=zh-cn
;è¯­éŸ³è¯†åˆ«è¯­è¨€ æ— éœ€å¡«å†™
detect_language=
;ç¿»è¯‘åˆ°çš„è¯­è¨€ zh-cn zh-tw en fr de ja ko ru es th it pt vi ar tr
target_language=en
;è½¯å­—å¹•åµŒå…¥æ—¶çš„è¯­è¨€ï¼Œä¸å¡«å†™
subtitle_language=
;true=å¯ç”¨CUDA
cuda=false
;è§’è‰²åç§°ï¼ŒopenaiTTSè§’è‰²åç§°â€œalloy,echo,fable,onyx,nova,shimmerâ€ï¼ŒedgeTTSè§’è‰²åç§°ä» voice_list.json ä¸­å¯¹åº”è¯­è¨€çš„è§’è‰²ä¸­å¯»æ‰¾ã€‚elevenlabsTTS çš„è§’è‰²åç§°ä» elevenlabs.json ä¸­å¯»æ‰¾
voice_role=en-CA-ClaraNeural
; é…éŸ³åŠ é€Ÿå€¼ï¼Œå¿…é¡»ä»¥ + å·æˆ– - å·å¼€å¤´ï¼Œ+ä»£è¡¨åŠ é€Ÿï¼Œ-ä»£è¡¨å‡é€Ÿï¼Œä»¥%ç»“å°¾
voice_rate=+0%
;å¯é€‰ edgetTTS  openaiTTS elevenlabsTTS
tts_type=edgeTTS
;é™éŸ³ç‰‡æ®µï¼Œå•ä½ms
voice_silence=500
;all=æ•´ä½“è¯†åˆ«ï¼Œsplit=é¢„å…ˆåˆ†å‰²å£°éŸ³ç‰‡æ®µåè¯†åˆ«
whisper_type=all
;è¯­éŸ³è¯†åˆ«æ¨¡å‹å¯é€‰ï¼Œbase small medium large-v3
whisper_model=base
;ç¿»è¯‘æ¸ é“ï¼Œå¯é€‰ google baidu  chatGPT Azure  Gemini  tencent DeepL DeepLX
translate_type=google
;0=ä¸åµŒå…¥å­—å¹•ï¼Œ1=åµŒå…¥ç¡¬å­—å¹•ï¼Œ2=åµŒå…¥è½¯å­—å¹•
subtitle_type=1
;true=é…éŸ³è‡ªåŠ¨åŠ é€Ÿ
voice_autorate=false
;true=è§†é¢‘è‡ªåŠ¨æ…¢é€Ÿ
video_autorate=false
;deeplç¿»è¯‘çš„æ¥å£åœ°å€
deepl_authkey=asdgasg
;è‡ªå·±é…ç½®çš„deeplxæœåŠ¡çš„æ¥å£åœ°å€
deeplx_address=http://127.0.0.1:1188
;è…¾è®¯ç¿»è¯‘id
tencent_SecretId=
;è…¾è®¯ç¿»è¯‘key
tencent_SecretKey=
;ç™¾åº¦ç¿»è¯‘id
baidu_appid=
;ç™¾åº¦ç¿»è¯‘å¯†é’¥
baidu_miyue=
; elevenlabsttsçš„key
elevenlabstts_key=
;chatGPT æ¥å£åœ°å€ï¼Œä»¥ /v1 ç»“å°¾ï¼Œå¯å¡«å†™ç¬¬ä¸‰æ–¹æ¥å£åœ°å€
chatgpt_api=
;chatGPTçš„key
chatgpt_key=
;chatGPTæ¨¡å‹ï¼Œå¯é€‰ gpt-3.5-turbo gpt-4
chatgpt_model=gpt-3.5-turbo
; Azure çš„apiæ¥å£åœ°å€
azure_api=
;Azureçš„key
azure_key=
; Azureçš„æ¨¡å‹åï¼Œå¯é€‰ gpt-3.5-turbo gpt-4
azure_model=gpt-3.5-turbo
;google Gemini çš„key
gemini_key=

```



# è§†é¢‘æ•™ç¨‹(ç¬¬ä¸‰æ–¹)

[Macä¸‹æºç éƒ¨ç½²/bç«™](https://www.bilibili.com/video/BV1tK421y7rd/)

[ç”¨Gemini Api ç»™è§†é¢‘ç¿»è¯‘è®¾ç½®æ–¹æ³•/bç«™](https://b23.tv/fED1dS3)

[å¦‚ä½•ä¸‹è½½å’Œå®‰è£…](https://www.bilibili.com/video/BV1Gr421s7cN/)


# è½¯ä»¶é¢„è§ˆæˆªå›¾

![image](https://github.com/jianchang512/pyvideotrans/assets/3378335/e5089358-a6e5-4989-9a50-1876c51dc2a7)





# ç›¸å…³è”é¡¹ç›®

[OTT:æœ¬åœ°ç¦»çº¿æ–‡å­—ç¿»è¯‘å·¥å…·](https://github.com/jianchang512/ott)

[å£°éŸ³å…‹éš†å·¥å…·:ç”¨ä»»æ„éŸ³è‰²åˆæˆè¯­éŸ³](https://github.com/jianchang512/clone-voice)

[è¯­éŸ³è¯†åˆ«å·¥å…·:æœ¬åœ°ç¦»çº¿çš„è¯­éŸ³è¯†åˆ«è½¬æ–‡å­—å·¥å…·](https://github.com/jianchang512/stt)

[äººå£°èƒŒæ™¯ä¹åˆ†ç¦»:äººå£°å’ŒèƒŒæ™¯éŸ³ä¹åˆ†ç¦»å·¥å…·](https://github.com/jianchang512/vocal-separate)

[GPT-SoVITSçš„api.pyæ”¹è‰¯ç‰ˆ](https://github.com/jianchang512/gptsovits-api)


## è‡´è°¢

> æœ¬ç¨‹åºä¸»è¦ä¾èµ–çš„éƒ¨åˆ†å¼€æºé¡¹ç›®

1. ffmpeg
2. PySide6
3. edge-tts
4. faster-whisper
5. openai-whisper
6. pydub

## å…³æ³¨ä½œè€…å¾®ä¿¡å…¬ä¼—å·

<img width="200" src="https://github.com/jianchang512/pyvideotrans/assets/3378335/f9337111-9084-41fe-8840-1fb8fedca92d">


å¦‚æœè§‰å¾—è¯¥é¡¹ç›®å¯¹ä½ æœ‰ä»·å€¼ï¼Œå¹¶å¸Œæœ›è¯¥é¡¹ç›®èƒ½ä¸€ç›´ç¨³å®šæŒç»­ç»´æŠ¤ï¼Œæ¬¢è¿æåŠ©

<img width="200" src="https://github.com/jianchang512/pyvideotrans/raw/main/images/wx.png">

<img width="200" src="https://github.com/jianchang512/pyvideotrans/assets/3378335/fe1aa29d-c26d-46d3-b7f3-e9c030ef32c7">