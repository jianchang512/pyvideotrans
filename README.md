[English](./README_ENG.md) / [æ–‡æ¡£](https://v.wonyes.org/preview.html) /  [ğŸ‘‘æåŠ©è¯¥é¡¹ç›®-æåŠ©è€…åˆ—è¡¨](./about.md) / [åŠ å…¥Discordè®¨è®º](https://discord.gg/evkPeKJddD)

## è§†é¢‘ç¿»è¯‘å’Œé…éŸ³å·¥å…·




>
> è¿™æ˜¯ä¸€ä¸ªè§†é¢‘ç¿»è¯‘é…éŸ³å·¥å…·ï¼Œå¯å°†ä¸€ç§è¯­è¨€çš„è§†é¢‘ç¿»è¯‘ä¸ºå¦ä¸€ç§è¯­è¨€é…éŸ³å’Œå­—å¹•çš„è§†é¢‘ã€‚
>
> è¯­éŸ³è¯†åˆ«åŸºäº `openai-whisper` ç¦»çº¿æ¨¡å‹.
>
> æ–‡å­—ç¿»è¯‘æ”¯æŒ `google|baidu|tencent|chatGPT|DeepL|DeepLX` ï¼Œ
>
> æ–‡å­—åˆæˆè¯­éŸ³æ”¯æŒ `Microsoft Edge tts` `Openai TTS-1`.
>

## ä¸»è¦ç”¨é€”å’Œä½¿ç”¨æ–¹å¼

ã€ç¿»è¯‘è§†é¢‘å¹¶é…éŸ³ã€‘æ ¹æ®éœ€è¦è®¾ç½®å„ä¸ªé€‰é¡¹ï¼Œè‡ªç”±é…ç½®ç»„åˆï¼Œå®ç°ç¿»è¯‘å’Œé…éŸ³ã€è‡ªåŠ¨åŠ å‡é€Ÿã€åˆå¹¶ç­‰

ã€æå–å­—å¹•ä¸ç¿»è¯‘ã€‘é€‰æ‹©è§†é¢‘æ–‡ä»¶ï¼Œé€‰æ‹©è§†é¢‘æºè¯­è¨€ï¼Œåˆ™ä»è§†é¢‘è¯†åˆ«å‡ºæ–‡å­—å¹¶è‡ªåŠ¨å¯¼å‡ºå­—å¹•æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€æå–å­—å¹•å¹¶ç¿»è¯‘ã€‘é€‰æ‹©è§†é¢‘æ–‡ä»¶ï¼Œé€‰æ‹©è§†é¢‘æºè¯­è¨€ï¼Œè®¾ç½®æƒ³ç¿»è¯‘åˆ°çš„ç›®æ ‡è¯­è¨€ï¼Œåˆ™ä»è§†é¢‘è¯†åˆ«å‡ºæ–‡å­—å¹¶ç¿»è¯‘ä¸ºç›®æ ‡è¯­è¨€ï¼Œç„¶åå¯¼å‡ºåŒè¯­å­—å¹•æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€å­—å¹•å’Œè§†é¢‘åˆå¹¶ã€‘é€‰æ‹©è§†é¢‘ï¼Œç„¶åå°†å·²æœ‰çš„å­—å¹•æ–‡ä»¶æ‹–æ‹½åˆ°å³ä¾§å­—å¹•åŒºï¼Œå°†æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€éƒ½è®¾ä¸ºå­—å¹•æ‰€ç”¨è¯­è¨€ã€ç„¶åé€‰æ‹©é…éŸ³ç±»å‹å’Œè§’è‰²ï¼Œå¼€å§‹æ‰§è¡Œ

ã€ä¸ºå­—å¹•åˆ›å»ºé…éŸ³ã€‘å°†æœ¬åœ°çš„å­—å¹•æ–‡ä»¶æ‹–æ‹½åˆ°å³ä¾§å­—å¹•ç¼–è¾‘å™¨ï¼Œç„¶åé€‰æ‹©ç›®æ ‡è¯­è¨€ã€é…éŸ³ç±»å‹å’Œè§’è‰²ï¼Œå°†ç”Ÿæˆé…éŸ³åçš„éŸ³é¢‘æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹

ã€éŸ³è§†é¢‘è¯†åˆ«æ–‡å­—ã€‘å°†è§†é¢‘æˆ–éŸ³é¢‘æ‹–æ‹½åˆ°è¯†åˆ«çª—å£ï¼Œå°†è¯†åˆ«å‡ºæ–‡å­—å¹¶å¯¼å‡ºä¸ºsrtå­—å¹•æ ¼å¼

ã€å°†æ–‡å­—åˆæˆè¯­éŸ³ã€‘å°†ä¸€æ®µæ–‡å­—æˆ–è€…å­—å¹•ï¼Œä½¿ç”¨æŒ‡å®šçš„é…éŸ³è§’è‰²ç”Ÿæˆé…éŸ³

ã€ä»è§†é¢‘åˆ†ç¦»éŸ³é¢‘ã€‘å°†è§†é¢‘æ–‡ä»¶åˆ†ç¦»ä¸ºéŸ³é¢‘æ–‡ä»¶å’Œæ— å£°è§†é¢‘

ã€éŸ³è§†é¢‘å­—å¹•åˆå¹¶ã€‘éŸ³é¢‘æ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ã€å­—å¹•æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªè§†é¢‘æ–‡ä»¶

ã€éŸ³è§†é¢‘æ ¼å¼è½¬æ¢ã€‘å„ç§æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢

----


https://github.com/jianchang512/pyvideotrans/assets/3378335/544409e1-4cec-45b9-ad5b-34b68170147d





## ä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬æ–¹æ³•

0. åªå¯ç”¨äº win10 win11 ç³»ç»Ÿ/Macä¸‹éœ€è‡ªè¡Œæ‹‰å–æºç ç¼–è¯‘

1. ä» release ä¸­ä¸‹è½½æœ€æ–°ç‰ˆï¼Œè§£å‹ï¼ŒåŒå‡» sp.exe

2. åŸå§‹è§†é¢‘ï¼šé€‰æ‹©mp4/avi/mov/mkv/mpegè§†é¢‘,å¯é€‰æ‹©å¤šä¸ªè§†é¢‘ï¼›

3. è¾“å‡ºè§†é¢‘ç›®å½•ï¼šå¦‚æœä¸é€‰æ‹©ï¼Œåˆ™é»˜è®¤ç”Ÿæˆåœ¨åŒç›®å½•ä¸‹çš„ `_video_out`ï¼ŒåŒæ—¶åœ¨è¯¥ç›®å½•ä¸‹çš„srtæ–‡ä»¶å¤¹ä¸­å°†åˆ›å»ºåŸè¯­è¨€å’Œç›®æ ‡è¯­è¨€çš„ä¸¤ç§å­—å¹•æ–‡ä»¶

4. é€‰æ‹©ç¿»è¯‘ï¼šå¯é€‰ googleã€baiduã€chatGPTã€DeepLã€DeepLXã€tencent ç¿»è¯‘æ¸ é“

5. ç½‘ç»œä»£ç†åœ°å€ï¼šå¦‚æœä½ æ‰€åœ¨åœ°åŒºæ— æ³•ç›´æ¥è®¿é—® google/chatGPTï¼Œéœ€è¦åœ¨è½¯ä»¶ç•Œé¢ ç½‘ç»œä»£ç† ä¸­è®¾ç½®ä»£ç†ï¼Œæ¯”å¦‚è‹¥ä½¿ç”¨ v2ray ï¼Œåˆ™å¡«å†™ `http://127.0.0.1:10809`,è‹¥clashï¼Œåˆ™å¡«å†™ `http://127.0.0.1:7890`. å¦‚æœä½ ä¿®æ”¹äº†é»˜è®¤ç«¯å£æˆ–ä½¿ç”¨çš„å…¶ä»–ä»£ç†è½¯ä»¶ï¼Œåˆ™æŒ‰éœ€å¡«å†™

6. è§†é¢‘åŸå§‹è¯­è¨€ï¼šé€‰æ‹©å¾…ç¿»è¯‘è§†é¢‘é‡Œçš„è¯­è¨€ç§ç±»

7. ç¿»è¯‘ç›®æ ‡è¯­è¨€ï¼šé€‰æ‹©å¸Œæœ›ç¿»è¯‘åˆ°çš„è¯­è¨€ç§ç±»

8. é€‰æ‹©é…éŸ³ï¼šé€‰æ‹©ç¿»è¯‘ç›®æ ‡è¯­è¨€åï¼Œå¯ä»é…éŸ³é€‰é¡¹ä¸­ï¼Œé€‰æ‹©é…éŸ³è§’è‰²ï¼›
   
   ç¡¬å­—å¹•: æ˜¯æŒ‡å§‹ç»ˆæ˜¾ç¤ºå­—å¹•ï¼Œä¸å¯éšè—ï¼Œå¦‚æœå¸Œæœ›ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¹Ÿæœ‰å­—å¹•ï¼Œè¯·é€‰æ‹©ç¡¬å­—å¹•åµŒå…¥

   è½¯å­—å¹•: å¦‚æœæ’­æ”¾å™¨æ”¯æŒå­—å¹•ç®¡ç†ï¼Œå¯æ˜¾ç¤ºæˆ–è€…éšè—å­—å¹•ï¼Œè¯¥æ–¹å¼ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¸ä¼šæ˜¾ç¤ºå­—å¹•ï¼ŒæŸäº›å›½äº§æ’­æ”¾å™¨å¯èƒ½ä¸æ”¯æŒ,éœ€è¦å°†ç”Ÿæˆçš„è§†é¢‘åŒåsrtæ–‡ä»¶å’Œè§†é¢‘æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹æ‰ä¼šæ˜¾ç¤º

   **å¦‚æœâ€œæ—¢ä¸åµŒå…¥å­—å¹•åˆä¸é€‰æ‹©é…éŸ³è§’è‰²â€å°†åªç”Ÿæˆå­—å¹•æ–‡ä»¶**

9. è¯­éŸ³è¯†åˆ«æ¨¡å‹: é€‰æ‹© base/small/medium/large/large-v3, è¯†åˆ«æ•ˆæœè¶Šæ¥è¶Šå¥½ï¼Œä½†è¯†åˆ«é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œæ‰€éœ€å†…å­˜è¶Šæ¥è¶Šå¤§ï¼Œç¬¬ä¸€æ¬¡å°†éœ€è¦ä¸‹è½½æ¨¡å‹ï¼Œé»˜è®¤ base,å¯ä»¥é¢„å…ˆå•ç‹¬ä¸‹è½½æ¨¡å‹åï¼Œæ”¾åˆ° `å½“å‰è½¯ä»¶ç›®å½•/models`ç›®å½•ä¸‹.

   **æ•´ä½“è¯†åˆ«/é¢„å…ˆåˆ†å‰²**: æ•´ä½“è¯†åˆ«æ˜¯æŒ‡ç›´æ¥å‘é€æ•´ä¸ªè¯­éŸ³æ–‡ä»¶ç»™æ¨¡å‹ï¼Œç”±æ¨¡å‹è¿›è¡Œå¤„ç†ï¼Œåˆ†å‰²å¯èƒ½æ›´ç²¾ç¡®ï¼Œä½†ä¹Ÿå¯èƒ½é€ å‡º30sé•¿åº¦çš„å•å­—å¹•ï¼Œé€‚åˆæœ‰æ˜ç¡®é™éŸ³çš„éŸ³é¢‘;  é¢„å…ˆåˆ†å‰²æ—¶æŒ‡å…ˆå°†éŸ³é¢‘æŒ‰10så·¦å³é•¿åº¦åˆ‡å‰²åå†åˆ†åˆ«å‘é€ç»™æ¨¡å‹å¤„ç†ã€‚

   **æ¨¡å‹å•ç‹¬ä¸‹è½½åœ°å€**

    [tinyæ¨¡å‹](https://openaipublic.azureedge.net/main/whisper/models/65147644a518d12f04e32d6f3b26facc3f8dd46e5390956a9424a650c0ce22b9/tiny.pt)
    
    [baseæ¨¡å‹](https://openaipublic.azureedge.net/main/whisper/models/ed3a0b6b1c0edf879ad9b11b1af5a0e6ab5db9205f891f668f8b0e6c6326e34e/base.pt)

    [smallæ¨¡å‹](https://openaipublic.azureedge.net/main/whisper/models/9ecf779972d90ba49c06d968637d720dd632c55bbf19d441fb42bf17a411e794/small.pt)

    [mediumæ¨¡å‹](https://openaipublic.azureedge.net/main/whisper/models/345ae4da62f9b3d59415adc60127b97c714f32e89e936602e85993674d08dcb1/medium.pt)

    [largeæ¨¡å‹](https://openaipublic.azureedge.net/main/whisper/models/e4b87e7e0bf463eb8e6956e646f1e277e901512310def2c24bf0e11bd3c28e9a/large.pt)

    [large-v3æ¨¡å‹](https://openaipublic.azureedge.net/main/whisper/models/e5b1a55b89c1367dacf97e3e19bfd829a01529dbfdeefa8caeb59b3f1b81dadb/large-v3.pt)

    [VLCè§£ç å™¨ä¸‹è½½](https://www.videolan.org/vlc/)

    [FFmepgä¸‹è½½(ç¼–è¯‘ç‰ˆå·²è‡ªå¸¦)](https://www.ffmpeg.org/)

10. é…éŸ³è¯­é€Ÿï¼šå¡«å†™ -90åˆ°+90 ä¹‹é—´çš„æ•°å­—ï¼ŒåŒæ ·ä¸€å¥è¯åœ¨ä¸åŒè¯­è¨€è¯­éŸ³ä¸‹ï¼Œæ‰€éœ€æ—¶é—´æ˜¯ä¸åŒçš„ï¼Œå› æ­¤é…éŸ³åå¯èƒ½å£°ç”»å­—å¹•ä¸åŒæ­¥ï¼Œå¯ä»¥è°ƒæ•´æ­¤å¤„è¯­é€Ÿï¼Œè´Ÿæ•°ä»£è¡¨é™é€Ÿï¼Œæ­£æ•°ä»£è¡¨åŠ é€Ÿæ’­æ”¾ã€‚

11. éŸ³è§†é¢‘å¯¹é½: åˆ†åˆ«æ˜¯â€œé…éŸ³è‡ªåŠ¨åŠ é€Ÿâ€å’Œâ€œè§†é¢‘è‡ªåŠ¨é™é€Ÿâ€

>
> ç¿»è¯‘åä¸åŒè¯­è¨€ä¸‹å‘éŸ³æ—¶é•¿ä¸åŒï¼Œæ¯”å¦‚ä¸€å¥è¯ä¸­æ–‡3sï¼Œç¿»è¯‘ä¸ºè‹±æ–‡å¯èƒ½5sï¼Œå¯¼è‡´æ—¶é•¿å’Œè§†é¢‘ä¸ä¸€è‡´ã€‚
> 
> 2ç§è§£å†³æ–¹å¼:
>
>     1. å¼ºåˆ¶é…éŸ³åŠ é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿ç¼©çŸ­é…éŸ³æ—¶é•¿å’Œè§†é¢‘å¯¹é½
> 
>     2. å¼ºåˆ¶è§†é¢‘æ…¢é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿å»¶é•¿è§†é¢‘æ—¶é•¿å’Œé…éŸ³å¯¹é½ã€‚
> 
> ä¸¤è€…åªå¯é€‰å…¶ä¸€
>  
 
  
12. é™éŸ³ç‰‡æ®µ: å¡«å†™100åˆ°2000çš„æ•°å­—ï¼Œä»£è¡¨æ¯«ç§’ï¼Œé»˜è®¤ 500ï¼Œå³ä»¥å¤§äºç­‰äº 500ms çš„é™éŸ³ç‰‡æ®µä¸ºåŒºé—´åˆ†å‰²è¯­éŸ³

13. CUDAåŠ é€Ÿï¼šç¡®è®¤ä½ çš„ç”µè„‘æ˜¾å¡ä¸º Nå¡ï¼Œå¹¶ä¸”å·²é…ç½®å¥½CUDAç¯å¢ƒå’Œé©±åŠ¨ï¼Œåˆ™å¼€å¯é€‰æ‹©æ­¤é¡¹ï¼Œé€Ÿåº¦èƒ½æå¤§æå‡

14. TTS: å¯ç”¨ edgeTTS å’Œ openai TTSæ¨¡å‹ä¸­é€‰æ‹©è¦åˆæˆè¯­éŸ³çš„è§’è‰²ï¼Œopenaiéœ€è¦ä½¿ç”¨å®˜æ–¹æ¥å£æˆ–è€…å¼€é€šäº†tts-1æ¨¡å‹çš„ä¸‰æ–¹æ¥å£

15. ç‚¹å‡» å¼€å§‹æŒ‰é’® åº•éƒ¨ä¼šæ˜¾ç¤ºå½“å‰è¿›åº¦å’Œæ—¥å¿—ï¼Œå³ä¾§æ–‡æœ¬æ¡†å†…æ˜¾ç¤ºå­—å¹•

16. å­—å¹•è§£æå®Œæˆåï¼Œå°†æš‚åœç­‰å¾…ä¿®æ”¹å­—å¹•ï¼Œå¦‚æœä¸åšä»»ä½•æ“ä½œï¼Œ60såå°†è‡ªåŠ¨ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ä¹Ÿå¯ä»¥åœ¨å³ä¾§å­—å¹•åŒºç¼–è¾‘å­—å¹•ï¼Œç„¶åæ‰‹åŠ¨ç‚¹å‡»ç»§ç»­åˆæˆ

17. å°†åœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸­è§†é¢‘åŒåçš„å­ç›®å½•å†…ï¼Œåˆ†åˆ«ç”Ÿæˆä¸¤ç§è¯­è¨€çš„å­—å¹•srtæ–‡ä»¶ã€åŸå§‹è¯­éŸ³å’Œé…éŸ³åçš„wavæ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿è¿›ä¸€æ­¥å¤„ç†


## æ³¨æ„äº‹é¡¹:

**å­—å¹•æ˜¾ç¤ºé—®é¢˜**
> 
> é‡‡ç”¨è½¯åˆæˆå­—å¹•ï¼šå­—å¹•ä½œä¸ºå•ç‹¬æ–‡ä»¶åµŒå…¥è§†é¢‘ï¼Œå¯å†æ¬¡æå–å‡ºï¼Œå¦‚æœæ’­æ”¾å™¨æ”¯æŒï¼Œå¯åœ¨æ’­æ”¾å™¨å­—å¹•ç®¡ç†ä¸­å¯ç”¨æˆ–ç¦ç”¨å­—å¹•ï¼›
> 
> æ³¨æ„å¾ˆå¤šå›½å†…æ’­æ”¾å™¨å¿…é¡»å°†srtå­—å¹•æ–‡ä»¶å’Œè§†é¢‘æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ä¸”åå­—ç›¸åŒï¼Œæ‰èƒ½åŠ è½½è½¯å­—å¹•ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦å°†srtæ–‡ä»¶è½¬ä¸ºGBKç¼–ç ï¼Œå¦åˆ™æ˜¾ç¤ºä¹±ç ï¼Œ
> 

**å­—å¹•è¯­éŸ³å¯¹é½é—®é¢˜**

> ç¿»è¯‘åä¸åŒè¯­è¨€ä¸‹å‘éŸ³æ—¶é•¿ä¸åŒï¼Œæ¯”å¦‚ä¸€å¥è¯ä¸­æ–‡3sï¼Œç¿»è¯‘ä¸ºè‹±æ–‡å¯èƒ½5sï¼Œå¯¼è‡´æ—¶é•¿å’Œè§†é¢‘ä¸ä¸€è‡´ã€‚
> 
> 2ç§è§£å†³æ–¹å¼:
> 
>     1. å¼ºåˆ¶é…éŸ³åŠ é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿ç¼©çŸ­é…éŸ³æ—¶é•¿å’Œè§†é¢‘å¯¹é½
> 
>     2. å¼ºåˆ¶è§†é¢‘æ…¢é€Ÿæ’­æ”¾ï¼Œä»¥ä¾¿å»¶é•¿è§†é¢‘æ—¶é•¿å’Œé…éŸ³å¯¹é½ã€‚
> 
> ä¸¤è€…åªå¯é€‰å…¶ä¸€



## æºç éƒ¨ç½²

1. é…ç½®å¥½ python 3.9+ ç¯å¢ƒ
2. `git clone https://github.com/jianchang512/pyvideotrans`
3. `cd pyvideotrans`
4. CPUç‰ˆ`pip install -r requirements.txt`
5. è§£å‹ ffmpeg.zip åˆ°æ ¹ç›®å½•ä¸‹ (ffmpeg.exeæ–‡ä»¶)
6. `python sp.py` æ‰“å¼€è½¯ä»¶ç•Œé¢, `python cli.py` å‘½ä»¤è¡Œæ‰§è¡Œ
7. å¦‚æœå¸Œæœ›æ‰“åŒ…ä¸ºexeçš„è¯ï¼Œè¯·ä½¿ç”¨å‘½ä»¤ `pyinstaller sp.py`,ä¸è¦æ·»åŠ  ` -F` å‚æ•°
8. å¦‚æœéœ€è¦æ”¯æŒCUDAåŠ é€Ÿï¼Œéœ€è¦è®¾å¤‡å…·æœ‰ NVIDIA æ˜¾å¡ï¼Œå…·ä½“å®‰è£…é˜²èŒƒè§ä¸‹æ–¹ "CUDA åŠ é€Ÿæ”¯æŒ"

## CLI å‘½ä»¤è¡Œæ–¹å¼ä½¿ç”¨
<details>
<summary>ç‚¹å¼€æŸ¥çœ‹å…·ä½“ä½¿ç”¨æ–¹æ³•</summary>

>
> æŒ‰ç…§ä¸Šè¿°æºç éƒ¨ç½²æ–¹å¼éƒ¨ç½²å¥½åï¼Œæ‰§è¡Œ `python cli.py`ï¼Œå¯åœ¨å‘½ä»¤è¡Œä¸‹æ‰§è¡Œ
> 

### æ”¯æŒçš„å‚æ•°

**--source_mp4**ï¼š ã€å¿…å¡«ã€‘å¾…ç¿»è¯‘è§†é¢‘è·¯å¾„ï¼Œä»¥.mp4ç»“å°¾

**--target_dir**ï¼š  ç¿»è¯‘åè§†é¢‘å­˜æ”¾ä½ç½®ï¼Œé»˜è®¤å­˜æ”¾æºè§†é¢‘ç›®å½•ä¸‹çš„ _video_out æ–‡ä»¶å¤¹

**--source_language**ï¼šè§†é¢‘è¯­è¨€ä»£ç ,é»˜è®¤`en` ( zh-cn | zh-tw | en | fr | de | ja | ko | ru | es | th | it | pt | vi | ar )

**--target_language**ï¼šç›®æ ‡è¯­è¨€ä»£ç ,é»˜è®¤`zh-cn` ( zh-cn | zh-tw | en | fr | de | ja | ko | ru | es | th | it | pt | vi | ar )

    zh-cn: Simplified_Chinese
    zh-tw: Traditional_Chinese
    en: English
    fr: French
    de: German
    ja: Japanese
    ko: Korean
    ru: Russian
    es: Spanish
    th: Thai
    it: Italian
    pt: Portuguese
    vi: Vietnamese
    ar: Arabic


**--proxy**ï¼šå¡«å†™ http ä»£ç†åœ°å€ï¼Œé»˜è®¤ None,å¦‚æœæ‰€åœ¨åœ°åŒºæ— æ³•è®¿é—®googleï¼Œéœ€è¦å¡«å†™ï¼Œä¾‹å¦‚: `http://127.0.0.1:10809`

**--subtitle_type**ï¼š1 åµŒå…¥ç¡¬å­—å¹•ï¼Œ2 åµŒå…¥è½¯å­—å¹•ã€‚

    ç¡¬å­—å¹•: æ˜¯æŒ‡å§‹ç»ˆæ˜¾ç¤ºå­—å¹•ï¼Œä¸å¯éšè—ï¼Œå¦‚æœå¸Œæœ›ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¹Ÿæœ‰å­—å¹•ï¼Œè¯·é€‰æ‹©ç¡¬å­—å¹•åµŒå…¥

    è½¯å­—å¹•: å¦‚æœæ’­æ”¾å™¨æ”¯æŒå­—å¹•ç®¡ç†ï¼Œå¯æ˜¾ç¤ºæˆ–è€…éšè—å­—å¹•ï¼Œè¯¥æ–¹å¼ç½‘é¡µä¸­æ’­æ”¾æ—¶ä¸ä¼šæ˜¾ç¤ºå­—å¹•ï¼ŒæŸäº›å›½äº§æ’­æ”¾å™¨å¯èƒ½ä¸æ”¯æŒ


**--voice_role**ï¼šæ ¹æ®æ‰€é€‰ç›®æ ‡è¯­è¨€ä»£ç ï¼Œå¡«å†™å¯¹åº”çš„è§’è‰²åï¼Œæ³¨æ„è§’è‰²åçš„å‰2ä¸ªå­—æ¯éœ€è¦å’Œç›®æ ‡è¯­è¨€ä»£ç çš„å‰2ä¸ªå­—æ¯ä¸€è‡´ï¼Œå¦‚æœä¸çŸ¥é“è¯¥æ€ä¹ˆå¡«å†™ï¼Œæ‰§è¡Œ`python cli.py show_vioce` å°†æ˜¾ç¤ºæ¯ç§è¯­è¨€å¯¹åº”å¯ç”¨çš„è§’è‰²åç§°

	zh: zh-HK-HiuGaaiNeural, zh-HK-HiuMaanNeural, zh-HK-WanLungNeural, zh-CN-XiaoxiaoNeural, zh-CN-XiaoyiNeural, zh-CN-YunjianNeural, zh-CN-YunxiNeural
    , zh-CN-YunxiaNeural, zh-CN-YunyangNeural, zh-CN-liaoning-XiaobeiNeural, zh-TW-HsiaoChenNeural, zh-TW-YunJheNeural, zh-TW-HsiaoYuNeural, zh-CN-shaa
    nxi-XiaoniNeural
    en: en-AU-NatashaNeural, en-AU-WilliamNeural, en-CA-ClaraNeural, en-CA-LiamNeural, en-HK-SamNeural, en-HK-YanNeural, en-IN-NeerjaExpressiveNeural,
    en-IN-NeerjaNeural, en-IN-PrabhatNeural, en-IE-ConnorNeural, en-IE-EmilyNeural, en-KE-AsiliaNeural, en-KE-ChilembaNeural, en-NZ-MitchellNeural, en-
    NZ-MollyNeural, en-NG-AbeoNeural, en-NG-EzinneNeural, en-PH-JamesNeural, en-PH-RosaNeural, en-SG-LunaNeural, en-SG-WayneNeural, en-ZA-LeahNeural, e
    n-ZA-LukeNeural, en-TZ-ElimuNeural, en-TZ-ImaniNeural, en-GB-LibbyNeural, en-GB-MaisieNeural, en-GB-RyanNeural, en-GB-SoniaNeural, en-GB-ThomasNeur
    al, en-US-AriaNeural, en-US-AnaNeural, en-US-ChristopherNeural, en-US-EricNeural, en-US-GuyNeural, en-US-JennyNeural, en-US-MichelleNeural, en-US-R
    ogerNeural, en-US-SteffanNeural
    fr: fr-BE-CharlineNeural, fr-BE-GerardNeural, fr-CA-AntoineNeural, fr-CA-JeanNeural, fr-CA-SylvieNeural, fr-FR-DeniseNeural, fr-FR-EloiseNeural, fr
    -FR-HenriNeural, fr-CH-ArianeNeural, fr-CH-FabriceNeural
    de: de-AT-IngridNeural, de-AT-JonasNeural, de-DE-AmalaNeural, de-DE-ConradNeural, de-DE-KatjaNeural, de-DE-KillianNeural, de-CH-JanNeural, de-CH-Le
    niNeural    
    ja: ja-JP-KeitaNeural, ja-JP-NanamiNeural
    ko: ko-KR-InJoonNeural, ko-KR-SunHiNeural    
    ru: ru-RU-DmitryNeural, ru-RU-SvetlanaNeural
    es: es-AR-ElenaNeural, es-AR-TomasNeural, es-BO-MarceloNeural, es-BO-SofiaNeural, es-CL-CatalinaNeural, es-CL-LorenzoNeural, es-CO-GonzaloNeural, e
    s-CO-SalomeNeural, es-CR-JuanNeural, es-CR-MariaNeural, es-CU-BelkysNeural, es-CU-ManuelNeural, es-DO-EmilioNeural, es-DO-RamonaNeural, es-EC-Andre
    aNeural, es-EC-LuisNeural, es-SV-LorenaNeural, es-SV-RodrigoNeural, es-GQ-JavierNeural, es-GQ-TeresaNeural, es-GT-AndresNeural, es-GT-MartaNeural,
    es-HN-CarlosNeural, es-HN-KarlaNeural, es-MX-DaliaNeural, es-MX-JorgeNeural, es-NI-FedericoNeural, es-NI-YolandaNeural, es-PA-MargaritaNeural, es-P
    A-RobertoNeural, es-PY-MarioNeural, es-PY-TaniaNeural, es-PE-AlexNeural, es-PE-CamilaNeural, es-PR-KarinaNeural, es-PR-VictorNeural, es-ES-AlvaroNe
    ural, es-ES-ElviraNeural, es-US-AlonsoNeural, es-US-PalomaNeural, es-UY-MateoNeural, es-UY-ValentinaNeural, es-VE-PaolaNeural, es-VE-SebastianNeura
    l
	th: th-TH-NiwatNeural, th-TH-PremwadeeNeural
	it: it-IT-DiegoNeural, it-IT-ElsaNeural, it-IT-IsabellaNeural
	pt: pt-BR-AntonioNeural, pt-BR-FranciscaNeural, pt-PT-DuarteNeural, pt-PT-RaquelNeural
    vi: vi-VN-HoaiMyNeural, vi-VN-NamMinhNeural
	ar: ar-DZ-AminaNeural, ar-DZ-IsmaelNeural, ar-BH-AliNeural, ar-BH-LailaNeural, ar-EG-SalmaNeural, ar-EG-ShakirNeural, ar-IQ-BasselNeural, ar-IQ-Ran
    aNeural, ar-JO-SanaNeural, ar-JO-TaimNeural, ar-KW-FahedNeural, ar-KW-NouraNeural, ar-LB-LaylaNeural, ar-LB-RamiNeural, ar-LY-ImanNeural, ar-LY-Oma
    rNeural, ar-MA-JamalNeural, ar-MA-MounaNeural, ar-OM-AbdullahNeural, ar-OM-AyshaNeural, ar-QA-AmalNeural, ar-QA-MoazNeural, ar-SA-HamedNeural, ar-S
    A-ZariyahNeural, ar-SY-AmanyNeural, ar-SY-LaithNeural, ar-TN-HediNeural, ar-TN-ReemNeural, ar-AE-FatimaNeural, ar-AE-HamdanNeural, ar-YE-MaryamNeural, ar-YE-SalehNeural

**--voice_rate**ï¼šè´Ÿæ•°é™ä½é…éŸ³è¯­é€Ÿï¼Œæ­£æ•°åŠ å¿«é…éŸ³è¯­é€Ÿï¼Œé»˜è®¤`0`

**--voice_silence**: è¾“å…¥100-2000ä¹‹é—´çš„æ•°å­—ï¼Œè¡¨ç¤ºé™éŸ³æ®µçš„æœ€å°æ¯«ç§’ï¼Œé»˜è®¤ä¸º 500ã€‚

**--voice_autorate**: å¦‚æœç¿»è¯‘åçš„éŸ³é¢‘æ—¶é•¿è¶…è¿‡åŸæ—¶é•¿ï¼Œæ˜¯å¦å¼ºåˆ¶åŠ é€Ÿæ’­æ”¾ç¿»è¯‘åçš„éŸ³é¢‘ï¼Œä»¥ä¾¿å¯¹é½æ—¶é•¿

**--whisper_model**: é»˜è®¤ä¸ºbaseï¼Œå¯é€‰ base / small / medium / largeï¼Œæ•ˆæœè¶Šæ¥å¥½ï¼Œé€Ÿåº¦è¶Šæ¥è¶Šæ…¢ã€‚


**cliç¤ºä¾‹**

`python cli.py --source_mp4 "D:/video/ex.mp4" --source_language en --target_language zh-cn --proxy "http://127.0.0.1:10809" --voice_replace zh-CN-XiaoxiaoNeural`

ä¸Šè¿°æ„æ€æ˜¯ï¼Œå°†æºè¯­è¨€ä¸ºè‹±æ–‡çš„ D:/video/ex.mp4 è§†é¢‘ï¼Œç¿»è¯‘ä¸ºä¸­æ–‡è§†é¢‘ï¼Œè®¾ç½®ä»£ç† http://127.0.0.1:10809 ä½¿ç”¨é…éŸ³è§’è‰²ä¸º zh-CN-XiaoxiaoNeural

`python cli.py --source_mp4 "D:/video/ex.mp4" --source_language zh-cn --target_language en  --proxy "http://127.0.0.1"1080
9"  --voice_replace en-US-AriaNeural --voice_autorate  --whisper_model small`

ä¸Šè¿°æ„æ€æ˜¯ï¼Œå°†æºè¯­è¨€ä¸ºä¸­æ–‡çš„ D:/video/ex.mp4 è§†é¢‘ï¼Œç¿»è¯‘ä¸ºè‹±æ–‡è§†é¢‘ï¼Œè®¾ç½®ä»£ç† http://127.0.0.1:10809 ä½¿ç”¨é…éŸ³è§’è‰²ä¸º en-US-AriaNeuralï¼Œå¦‚æœç¿»è¯‘åçš„è¯­éŸ³æ—¶é•¿å¤§äºåŸè¯­éŸ³ï¼Œåˆ™è‡ªåŠ¨åŠ é€Ÿï¼Œæ–‡å­—è¯†åˆ«æ¨¡å‹é‡‡ç”¨ small æ¨¡å‹

</details>


## CUDA åŠ é€Ÿæ”¯æŒ

0. å¦‚æœä½ çš„æ˜¾å¡æ˜¯ Nvidiaï¼Œå¯ä»¥æ ¹æ®æ˜¾å¡é©±åŠ¨ç‰ˆæœ¬å’Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œå»å®‰è£…å¯¹åº”çš„ 
   [CUDA Toolkit 11.8](https://developer.nvidia.com/cuda-downloads) å’Œ  [cudnn for CUDA11.X](https://developer.nvidia.com/rdp/cudnn-archive), å»ºè®®é¢„å…ˆå°†æ˜¾å¡é©±åŠ¨å‡çº§åˆ°æœ€æ–°ç‰ˆï¼Œå†å»å®‰è£…ã€‚è¦å®Œæ•´æ”¯æŒCUDAï¼Œéœ€è¦ä½¿ç”¨æºç ç‰ˆåœ¨è‡ªå·±ç”µè„‘éƒ¨ç½²

1. å»gitæ‹‰å–æºç ï¼Œç„¶åé…ç½®å¥½pythonè™šæ‹Ÿç¯å¢ƒï¼Œç„¶åæ¿€æ´» 
   
2. å®‰è£… `pip install -r requirements.txt` 

3. åˆ°æ­¤åº”è¯¥å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œé‚£ä¹ˆæ‰§è¡Œ `pip uninstall torch torchaudio torchvision` å¸è½½ï¼Œç„¶åå» [https://pytorch.org/get-started/locally/]() æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿç±»å‹å’Œ CUDA ç‰ˆæœ¬ï¼Œé€‰æ‹©å‘½ä»¤,å¦‚ä¸‹å›¾
![](https://private-user-images.githubusercontent.com/3378335/285566255-521d8623-fc91-43cb-bed4-e21b9b87f39d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTEiLCJleHAiOjE3MDA5MDg0MDcsIm5iZiI6MTcwMDkwODEwNywicGF0aCI6Ii8zMzc4MzM1LzI4NTU2NjI1NS01MjFkODYyMy1mYzkxLTQzY2ItYmVkNC1lMjFiOWI4N2YzOWQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQUlXTkpZQVg0Q1NWRUg1M0ElMkYyMDIzMTEyNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyMzExMjVUMTAyODI3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDZlODIyYjc1NjgzNWM0NGM4OWY1M2Y3N2Y3OTk3OTg3NzkxODZiOWIwY2Y4NmM0NjVhMjFkMDNlY2NkZjc5NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-WNQR73lwrc-gEHU_-aX5Us-pzeyyRKNMm-5v212CWc)
   ç„¶åå°† `pip3` æ”¹ä¸º `pip`ï¼Œå†å¤åˆ¶å‘½ä»¤å»æ‰§è¡Œã€‚

   **å®‰è£…å®Œæ¯•åï¼Œåœ¨è¯¥è™šæ‹Ÿç¯å¢ƒé‡Œï¼Œæ‰§è¡Œ `python`,ç­‰å¾…è¿›å…¥åï¼Œå†åˆ†åˆ«æ‰§è¡Œ `import torch`,`torch.cuda.is_available()`,å¦‚æœæœ‰è¾“å‡ºï¼Œè¯´æ˜CUDAé…ç½®æ­£ç¡®ï¼Œå¦åˆ™è¯·æ£€æŸ¥é…ç½®æˆ–è€…é‡æ–°é…ç½®CUDA**
   
5. CUDAç¯å¢ƒé…ç½®ç›¸å¯¹å¤æ‚ï¼Œé‡åˆ°é—®é¢˜å¤šæœç´¢æˆ–å‘ä¸ªissue



## è½¯ä»¶é¢„è§ˆæˆªå›¾

![](./images/p1.png?b)
![](./images/p2.png?b)
![](./images/p3.png?b)
![](./images/p4.png?b)
![](./images/p5.png?b)
![](./images/p6.png?b)
![](./images/cli.png?c)


## è§†é¢‘å‰åå¯¹æ¯”

[Demo åŸè§†é¢‘å’Œç¿»è¯‘åè§†é¢‘](https://www.wonyes.org/demo.html)

[Youtube demo](https://youtu.be/skLtE1XnO6Q)


## è‡´è°¢

> æœ¬ç¨‹åºä¾èµ–è¿™äº›å¼€æºé¡¹ç›®

1. pydub
2. ffmpeg
3. PyQt5
4. SpeechRecognition
5. edge-tts
6. openai-whisper
7. opencv-python
